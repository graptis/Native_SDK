<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="generator" content="Doxygen 1.8.6"/>
<title>PVRUtils: /usr/buildxl/buildroot/sdk/branch/SDK/framework/PVRUtils/Vulkan/HelperVk.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="IMGdoxygen.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="http://www.imgtec.com/images/img.ico">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
  <div class="headercontent">
    <div class="PVRlogo">
      <a href="http://www.powervrinsider.com" target="_blank"><img src="PVRlogo.png" width="40%" height="40%"  border="none" /></a>
    </div>
    <a class="SiteTitle"><span id="projectname">PVRUtils</span> Documentation</a>
   <tbody>
  </div>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_687531cb5acd5e736601deea3ef3b7c0.html">SDK</a></li><li class="navelem"><a class="el" href="dir_407ce59cc93389552d4bbf4df897abf8.html">framework</a></li><li class="navelem"><a class="el" href="dir_56a6b2806f907a59546ae220133253ab.html">PVRUtils</a></li><li class="navelem"><a class="el" href="dir_2a4e396b2e69f22c2b04ad2a158af6a3.html">Vulkan</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">HelperVk.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_helper_vk_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &quot;PVRCore/PVRCore.h&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;PVRCore/IO/FileStream.h&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;PVRAssets/Model.h&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;PVRAssets/PVRAssets.h&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;PVRAssets/TextureLoad.h&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;PVRAssets/FileIO/PFXParser.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;PVRVk/DeviceVk.h&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;PVRVk/PhysicalDeviceVk.h&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;PVRVk/InstanceVk.h&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;PVRVk/CommandBufferVk.h&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;PVRVk/ImageVk.h&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;PVRVk/SurfaceVk.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_convert_to_p_v_r_vk_types_8h.html">ConvertToPVRVkTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;PVRVk/CommandPoolVk.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;PVRVk/QueueVk.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;PVRVk/RenderPassVk.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;PVRVk/FramebufferVk.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;PVRVk/SwapchainVk.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_memory_allocator_8h.html">PVRUtils/Vulkan/MemoryAllocator.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">namespace </span>pvr {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">namespace </span>utils {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;pvrvk::ImageAspectFlags inferAspectFromFormat(pvrvk::Format format);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keywordtype">void</span> getColorBits(pvrvk::Format format, uint32_t&amp; redBits, uint32_t&amp; greenBits, uint32_t&amp; blueBits, uint32_t&amp; alphaBits);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keywordtype">void</span> getDepthStencilBits(pvrvk::Format format, uint32_t&amp; depthBits, uint32_t&amp; stencilBits);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;pvrvk::Buffer <a class="code" href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">createBuffer</a>(pvrvk::Device device, VkDeviceSize size, pvrvk::BufferUsageFlags bufferUsage, pvrvk::MemoryPropertyFlags requiredMemoryFlags,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    pvrvk::MemoryPropertyFlags optimalMemoryFlags = pvrvk::MemoryPropertyFlags::e_NONE, vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    vma::AllocationCreateFlags vmaAllocationCreateFlags = vma::AllocationCreateFlags::e_MAPPED_BIT, pvrvk::BufferCreateFlags bufferCreateFlags = pvrvk::BufferCreateFlags(0),</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    pvrvk::SharingMode sharingMode = pvrvk::SharingMode::e_EXCLUSIVE, <span class="keyword">const</span> uint32_t* queueFamilyIndices = <span class="keyword">nullptr</span>, uint32_t numQueueFamilyIndices = 0);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<a class="code" href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvrvk::Image</a> <a class="code" href="namespacepvr_1_1utils.html#a2ea80135aa97006c881f5d3fface1563">createImage</a>(pvrvk::Device device, pvrvk::ImageType imageType, pvrvk::Format format, <span class="keyword">const</span> pvrvk::Extent3D&amp; dimension, pvrvk::ImageUsageFlags usage,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    pvrvk::ImageCreateFlags flags = pvrvk::ImageCreateFlags(0), <span class="keyword">const</span> pvrvk::ImageLayersSize&amp; layerSize = pvrvk::ImageLayersSize(),</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    pvrvk::SampleCountFlags samples = pvrvk::SampleCountFlags::e_1_BIT, pvrvk::MemoryPropertyFlags requiredMemoryFlags = pvrvk::MemoryPropertyFlags::e_DEVICE_LOCAL_BIT,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    pvrvk::MemoryPropertyFlags optimalMemoryFlags = pvrvk::MemoryPropertyFlags::e_NONE, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    vma::AllocationCreateFlags vmaAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE, pvrvk::SharingMode sharingMode = pvrvk::SharingMode::e_EXCLUSIVE,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    pvrvk::ImageTiling tiling = pvrvk::ImageTiling::e_OPTIMAL, pvrvk::ImageLayout initialLayout = pvrvk::ImageLayout::e_UNDEFINED, <span class="keyword">const</span> uint32_t* queueFamilyIndices = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    uint32_t numQueueFamilyIndices = 0);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a3555f264beaaf83ff1b84853a87a40fe">  106</a></span>&#160;<span class="keyword">inline</span> glm::mat4 <a class="code" href="namespacepvr_1_1utils.html#a3555f264beaaf83ff1b84853a87a40fe">getPerspectiveMatrix</a>(<span class="keywordtype">float</span> fovy, <span class="keywordtype">float</span> aspect, <span class="keywordtype">float</span> near1, <span class="keywordtype">float</span> far1, <span class="keywordtype">float</span> rotate = .0f)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    glm::mat4 mat = glm::perspective(fovy, aspect, near1, far1);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    mat[1][1] *= -1.f; <span class="comment">// negate the y axis&#39;s y component, because vulkan coordinate system is +y down</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> (rotate == 0.f ? mat : glm::rotate(rotate, glm::vec3(0.0f, 0.0f, 1.0f)) * mat);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a5aa9ef93f949ec94122ac1f5d915f8a0">setImageLayoutAndQueueFamilyOwnership</a>(pvrvk::CommandBufferBase srccmd, pvrvk::CommandBufferBase dstcmd, uint32_t srcQueueFamily, uint32_t dstQueueFamily,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    pvrvk::ImageLayout oldLayout, pvrvk::ImageLayout newLayout, <a class="code" href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvrvk::Image</a> image, uint32_t baseMipLevel, uint32_t numMipLevels, uint32_t baseArrayLayer, uint32_t numArrayLayers,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    pvrvk::ImageAspectFlags aspect);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a8ea166ded6ff46a11573815a99f42869">  135</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a8ea166ded6ff46a11573815a99f42869">setImageLayout</a>(<a class="code" href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvrvk::Image</a> image, pvrvk::ImageLayout oldLayout, pvrvk::ImageLayout newLayout, pvrvk::CommandBufferBase transitionCmdBuffer)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="namespacepvr_1_1utils.html#a5aa9ef93f949ec94122ac1f5d915f8a0">setImageLayoutAndQueueFamilyOwnership</a>(transitionCmdBuffer, pvrvk::CommandBufferBase(), static_cast&lt;uint32_t&gt;(-1), static_cast&lt;uint32_t&gt;(-1), oldLayout, newLayout, image, 0,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        image-&gt;getNumMipLevels(), 0, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(image-&gt;getNumArrayLayers() * (1 + image-&gt;isCubeMap() * 5)), inferAspectFromFormat(image-&gt;getFormat()));</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;pvrvk::ImageView <a class="code" href="namespacepvr_1_1utils.html#a59dd0ec7054d10491117326027890b2d">uploadImageAndViewSubmit</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> Texture&amp; texture, <span class="keywordtype">bool</span> allowDecompress, pvrvk::CommandPool&amp; cmdPool, pvrvk::Queue&amp; queue,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    pvrvk::ImageUsageFlags usageFlags = pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout = pvrvk::ImageLayout::e_GENERAL,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    vma::Allocator* stagingBufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    vma::AllocationCreateFlags imageAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;pvrvk::ImageView <a class="code" href="namespacepvr_1_1utils.html#a23e2bd58f63311d085500c45a565368e">uploadImageAndView</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> Texture&amp; texture, <span class="keywordtype">bool</span> allowDecompress, pvrvk::SecondaryCommandBuffer&amp; commandBuffer,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    pvrvk::ImageUsageFlags usageFlags = pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout = pvrvk::ImageLayout::e_GENERAL,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    vma::Allocator* stagingBufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    vma::AllocationCreateFlags imageAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;pvrvk::ImageView <a class="code" href="namespacepvr_1_1utils.html#a23e2bd58f63311d085500c45a565368e">uploadImageAndView</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> Texture&amp; texture, <span class="keywordtype">bool</span> allowDecompress, pvrvk::CommandBuffer&amp; commandBuffer,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    pvrvk::ImageUsageFlags usageFlags = pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout = pvrvk::ImageLayout::e_GENERAL,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    vma::Allocator* stagingBufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    vma::AllocationCreateFlags imageAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;pvrvk::ImageView <a class="code" href="namespacepvr_1_1utils.html#ae8540d26fd007bdb7043485ae4d5d3f7">loadAndUploadImageAndView</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> <span class="keywordtype">char</span>* fileName, <span class="keywordtype">bool</span> allowDecompress, pvrvk::CommandBuffer&amp; commandBuffer, IAssetProvider&amp; assetProvider,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    pvrvk::ImageUsageFlags usageFlags = pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout = pvrvk::ImageLayout::e_GENERAL, Texture* outAssetTexture = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    vma::Allocator* stagingBufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    vma::AllocationCreateFlags imageAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<a class="code" href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvrvk::Image</a> <a class="code" href="namespacepvr_1_1utils.html#a7ad37dc22982184696fa727a91a4d463">loadAndUploadImage</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> <span class="keywordtype">char</span>* fileName, <span class="keywordtype">bool</span> allowDecompress, pvrvk::CommandBuffer&amp; commandBuffer, IAssetProvider&amp; assetProvider,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    pvrvk::ImageUsageFlags usageFlags = pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout = pvrvk::ImageLayout::e_GENERAL, Texture* outAssetTexture = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    vma::Allocator* stagingBufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    vma::AllocationCreateFlags imageAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;pvrvk::ImageView <a class="code" href="namespacepvr_1_1utils.html#ae8540d26fd007bdb7043485ae4d5d3f7">loadAndUploadImageAndView</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> <span class="keywordtype">char</span>* fileName, <span class="keywordtype">bool</span> allowDecompress, pvrvk::SecondaryCommandBuffer&amp; commandBuffer,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    IAssetProvider&amp; assetProvider, pvrvk::ImageUsageFlags usageFlags = pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout = pvrvk::ImageLayout::e_GENERAL,</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    Texture* outAssetTexture = <span class="keyword">nullptr</span>, vma::Allocator* stagingBufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    vma::AllocationCreateFlags imageAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<a class="code" href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvrvk::Image</a> <a class="code" href="namespacepvr_1_1utils.html#a7ad37dc22982184696fa727a91a4d463">loadAndUploadImage</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> <span class="keywordtype">char</span>* fileName, <span class="keywordtype">bool</span> allowDecompress, pvrvk::SecondaryCommandBuffer&amp; commandBuffer, IAssetProvider&amp; assetProvider,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    pvrvk::ImageUsageFlags usageFlags = pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout = pvrvk::ImageLayout::e_GENERAL, Texture* outAssetTexture = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    vma::Allocator* stagingBufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    vma::AllocationCreateFlags imageAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html">  283</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_image_update_info.html">ImageUpdateInfo</a></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// 1D/Array texture and common for rest</span></div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a9c2480ee85781549db081da54c7cbf7b">  286</a></span>&#160;    int32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a9c2480ee85781549db081da54c7cbf7b">offsetX</a>; </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#ae8eb6603e41f6af5b9ddfbe6d6485570">  287</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#ae8eb6603e41f6af5b9ddfbe6d6485570">imageWidth</a>; </div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a8d9cfeb4d88791e650d994402d00511c">  288</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a8d9cfeb4d88791e650d994402d00511c">dataWidth</a>; </div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a6cde0ffe41f15363a6589bf287aa30d3">  289</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a6cde0ffe41f15363a6589bf287aa30d3">arrayIndex</a>; </div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a1b452f639a4e507f7d3bdfaf529da029">  290</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a1b452f639a4e507f7d3bdfaf529da029">mipLevel</a>; </div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a66c0abcd177d448a4b0a140321fa1427">  291</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a66c0abcd177d448a4b0a140321fa1427">data</a>; </div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a35ffe0060a18ba6f85103107860e465a">  292</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a35ffe0060a18ba6f85103107860e465a">dataSize</a>; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// 2D/ Array texture only</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a3bae3542769781673b17522db91c19b0">  295</a></span>&#160;    int32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a3bae3542769781673b17522db91c19b0">offsetY</a>; </div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a63830a23335c0e841e02b4f02f0363f7">  296</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a63830a23335c0e841e02b4f02f0363f7">imageHeight</a>; </div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a7088e032f08263a7d72acafbd6c93fca">  297</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a7088e032f08263a7d72acafbd6c93fca">dataHeight</a>; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// cube/ Array Map only. Derive all states above</span></div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#a74171c9f0e1ea8f1eac9a991349389a6">  300</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a74171c9f0e1ea8f1eac9a991349389a6">cubeFace</a>; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// 3D texture Only. Derive all states above Except arrayIndex</span></div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#af9bdb2f2512ec72d5669ae3b870d7fa5">  303</a></span>&#160;    int32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#af9bdb2f2512ec72d5669ae3b870d7fa5">offsetZ</a>; </div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_image_update_info.html#ac9fe2c31e80c1a067508d5d288f12801">  304</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#ac9fe2c31e80c1a067508d5d288f12801">depth</a>; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html">ImageUpdateInfo</a>()</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        : <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a9c2480ee85781549db081da54c7cbf7b">offsetX</a>(0), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#ae8eb6603e41f6af5b9ddfbe6d6485570">imageWidth</a>(1), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a8d9cfeb4d88791e650d994402d00511c">dataWidth</a>(1), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a1b452f639a4e507f7d3bdfaf529da029">mipLevel</a>(0), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a66c0abcd177d448a4b0a140321fa1427">data</a>(nullptr), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a35ffe0060a18ba6f85103107860e465a">dataSize</a>(0), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a3bae3542769781673b17522db91c19b0">offsetY</a>(0), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a63830a23335c0e841e02b4f02f0363f7">imageHeight</a>(1), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a7088e032f08263a7d72acafbd6c93fca">dataHeight</a>(1), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#a74171c9f0e1ea8f1eac9a991349389a6">cubeFace</a>(0), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#af9bdb2f2512ec72d5669ae3b870d7fa5">offsetZ</a>(0), <a class="code" href="structpvr_1_1utils_1_1_image_update_info.html#ac9fe2c31e80c1a067508d5d288f12801">depth</a>(1)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    {}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;};</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a71cc4019e6c6315a8a714f4103bfe503">updateImage</a>(pvrvk::Device&amp; device, pvrvk::CommandBufferBase transferCommandBuffer, ImageUpdateInfo* updateInfos, uint32_t numUpdateInfos, pvrvk::Format format,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    pvrvk::ImageLayout layout, <span class="keywordtype">bool</span> isCubeMap, <a class="code" href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvrvk::Image</a>&amp; image, vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">  337</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">updateHostVisibleBuffer</a>(pvrvk::Buffer&amp; buffer, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, VkDeviceSize offset = 0, VkDeviceSize size = VK_WHOLE_SIZE, <span class="keywordtype">bool</span> flushMemory = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordtype">void</span>* mapData = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordtype">bool</span> unmap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (!buffer-&gt;getDeviceMemory()-&gt;isMapped())</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        buffer-&gt;getDeviceMemory()-&gt;map(&amp;mapData, offset, size);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        unmap = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        mapData = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(buffer-&gt;getDeviceMemory()-&gt;getMappedData()) + offset;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    memcpy(mapData, data, (<span class="keywordtype">size_t</span>)size);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (static_cast&lt;uint32_t&gt;(buffer-&gt;getDeviceMemory()-&gt;getMemoryFlags() &amp; pvrvk::MemoryPropertyFlags::e_HOST_COHERENT_BIT) != 0)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        flushMemory = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (flushMemory)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        buffer-&gt;getDeviceMemory()-&gt;flushRange(offset, size);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (unmap)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        buffer-&gt;getDeviceMemory()-&gt;unmap();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">  377</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">updateBufferUsingStagingBuffer</a>(pvrvk::Device&amp; device, pvrvk::Buffer&amp; buffer, pvrvk::CommandBufferBase uploadCmdBuffer, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, VkDeviceSize offset = 0,</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    VkDeviceSize size = VK_WHOLE_SIZE, vma::Allocator* stagingBufferAllocator = <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;{</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">// Updating memory via the use of staging buffers is necessary when memory is not host visible. In this case the buffer memory will be updated indirectly as follows:</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">//      1. Create a staging buffer</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">//      2. map the staging buffer memory, update the memory, then unmap the buffer memory</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">//      3. Copy from the staging buffer to the target buffer</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// 1. Create a staging buffer</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    pvrvk::MemoryPropertyFlags memoryFlags = pvrvk::MemoryPropertyFlags::e_HOST_VISIBLE_BIT;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    pvrvk::Buffer stagingBuffer = <a class="code" href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">pvr::utils::createBuffer</a>(device, size, pvrvk::BufferUsageFlags::e_TRANSFER_SRC_BIT, memoryFlags, memoryFlags, stagingBufferAllocator);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// 2. map (if required), then update the memory, then finally unmap (if required)</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">updateHostVisibleBuffer</a>(stagingBuffer, data, offset, size, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// 3. Copy from the staging buffer to the target buffer</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">const</span> pvrvk::BufferCopy bufferCopy(0, offset, size);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    uploadCmdBuffer-&gt;copyBuffer(stagingBuffer, buffer, 1, &amp;bufferCopy);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a5d3d1522b9db9f69b91090f918ccc8c0">generateTextureAtlas</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> <a class="code" href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvrvk::Image</a>* inputImages, pvrvk::Rect2Df* outUVs, uint32_t numImages, pvrvk::ImageLayout inputImageLayout,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    pvrvk::ImageView* outImageView, TextureHeader* outDescriptor, pvrvk::CommandBufferBase cmdBuffer, pvrvk::ImageLayout finalLayout = pvrvk::ImageLayout::e_SHADER_READ_ONLY_OPTIMAL,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>, vma::AllocationCreateFlags imageAllocationCreateFlags = vma::AllocationCreateFlags::e_NONE);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_queue_populate_info.html">  418</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_queue_populate_info.html">QueuePopulateInfo</a></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_queue_populate_info.html#a8f6a04a2c21acef02ed848f4de285643">  421</a></span>&#160;    pvrvk::QueueFlags <a class="code" href="structpvr_1_1utils_1_1_queue_populate_info.html#a8f6a04a2c21acef02ed848f4de285643">queueFlags</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_queue_populate_info.html#ab303d9a7f5c55fcd9a13f272ae23b764">  424</a></span>&#160;    pvrvk::Surface <a class="code" href="structpvr_1_1utils_1_1_queue_populate_info.html#ab303d9a7f5c55fcd9a13f272ae23b764">surface</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;};</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_queue_access_info.html">  429</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_queue_access_info.html">QueueAccessInfo</a></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;{</div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_queue_access_info.html#a6d0e303c656d8312932d268db869596a">  432</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_queue_access_info.html#a6d0e303c656d8312932d268db869596a">familyId</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_queue_access_info.html#ae5df4d78d8d64b5009b8c5a9e36c0e23">  435</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_queue_access_info.html#ae5df4d78d8d64b5009b8c5a9e36c0e23">queueId</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;};</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_device_extensions.html">  439</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_device_extensions.html">DeviceExtensions</a></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_device_extensions.html#a958e2eeac8ddfd9ea8dabaaa8d2f35cf">  441</a></span>&#160;    std::vector&lt;std::string&gt; <a class="code" href="structpvr_1_1utils_1_1_device_extensions.html#a958e2eeac8ddfd9ea8dabaaa8d2f35cf">extensionStrings</a>; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="structpvr_1_1utils_1_1_device_extensions.html#ab080c06dadfec28a35acd108a24a87c6">DeviceExtensions</a>()</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">#ifdef VK_KHR_swapchain</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor"></span>        <span class="comment">// enable the swap chain extension</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="structpvr_1_1utils_1_1_device_extensions.html#a958e2eeac8ddfd9ea8dabaaa8d2f35cf">extensionStrings</a>.push_back(VK_KHR_SWAPCHAIN_EXTENSION_NAME);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">#ifdef VK_IMG_format_pvrtc</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor"></span>        <span class="comment">// attempt to enable pvrtc extension</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="structpvr_1_1utils_1_1_device_extensions.html#a958e2eeac8ddfd9ea8dabaaa8d2f35cf">extensionStrings</a>.push_back(VK_IMG_FORMAT_PVRTC_EXTENSION_NAME);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#ifdef VK_IMG_filter_cubic</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor"></span>        <span class="comment">// attempt to enable IMG cubic filtering</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="structpvr_1_1utils_1_1_device_extensions.html#a958e2eeac8ddfd9ea8dabaaa8d2f35cf">extensionStrings</a>.push_back(VK_IMG_FILTER_CUBIC_EXTENSION_NAME);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef VK_EXT_debug_marker</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor"></span>        <span class="comment">// if the build is Debug then enable the DEBUG_MARKER extension to aid with debugging</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <a class="code" href="structpvr_1_1utils_1_1_device_extensions.html#a958e2eeac8ddfd9ea8dabaaa8d2f35cf">extensionStrings</a>.push_back(VK_EXT_DEBUG_MARKER_EXTENSION_NAME);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;};</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_instance_layers.html">  470</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_instance_layers.html">InstanceLayers</a></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;{</div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_instance_layers.html#a80f41cec0f1759be144113066bdcd68c">  473</a></span>&#160;    std::vector&lt;std::string&gt; <a class="code" href="structpvr_1_1utils_1_1_instance_layers.html#a80f41cec0f1759be144113066bdcd68c">layersStrings</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_instance_layers.html#a847198ad122769b11e33da68c05725cd">  478</a></span>&#160;    <a class="code" href="structpvr_1_1utils_1_1_instance_layers.html#a847198ad122769b11e33da68c05725cd">InstanceLayers</a>(<span class="keywordtype">bool</span> forceLayers =</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;#ifdef DEBUG</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                       <span class="keyword">true</span>)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor"></span>                       <span class="keyword">false</span>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;#endif</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// if the build is Debug then enable the LUNARG_standard_validation layer to aid with debugging</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">if</span> (forceLayers)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <a class="code" href="structpvr_1_1utils_1_1_instance_layers.html#a80f41cec0f1759be144113066bdcd68c">layersStrings</a>.push_back(<span class="stringliteral">&quot;VK_LAYER_LUNARG_standard_validation&quot;</span>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <a class="code" href="structpvr_1_1utils_1_1_instance_layers.html#a80f41cec0f1759be144113066bdcd68c">layersStrings</a>.push_back(<span class="stringliteral">&quot;VK_LAYER_ARM_mali_perf_doc&quot;</span>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;};</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_instance_extensions.html">  495</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_instance_extensions.html">InstanceExtensions</a></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;{</div>
<div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_instance_extensions.html#a494d9b581ffb708349599aabc2a5838a">  497</a></span>&#160;    std::vector&lt;std::string&gt; <a class="code" href="structpvr_1_1utils_1_1_instance_extensions.html#a494d9b581ffb708349599aabc2a5838a">extensionStrings</a>; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="structpvr_1_1utils_1_1_instance_extensions.html#a3578abfc0e4e90921df30baa73dd2194">InstanceExtensions</a>();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;};</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;pvrvk::Device <a class="code" href="namespacepvr_1_1utils.html#a42affc049a44dc37070da0d0a88d1ee5">createDeviceAndQueues</a>(pvrvk::PhysicalDevice physicalDevice, <span class="keyword">const</span> <a class="code" href="structpvr_1_1utils_1_1_queue_populate_info.html">QueuePopulateInfo</a>* queueCreateFlags, uint32_t numQueueCreateFlags, <a class="code" href="structpvr_1_1utils_1_1_queue_access_info.html">QueueAccessInfo</a>* outAccessInfo,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">const</span> <a class="code" href="structpvr_1_1utils_1_1_device_extensions.html">DeviceExtensions</a>&amp; deviceExtensions = <a class="code" href="structpvr_1_1utils_1_1_device_extensions.html">DeviceExtensions</a>());</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;pvrvk::Swapchain <a class="code" href="namespacepvr_1_1utils.html#a31577c3e0b7564dde7e0e46c252317d3">createSwapchain</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> pvrvk::Surface&amp; surface, pvr::DisplayAttributes&amp; displayAttributes, pvrvk::Format* preferredColorFormats,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    uint32_t numColorFormats, pvrvk::ImageUsageFlags swapchainImageUsageFlags = pvrvk::ImageUsageFlags::e_COLOR_ATTACHMENT_BIT);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;pvrvk::Swapchain <a class="code" href="namespacepvr_1_1utils.html#a31577c3e0b7564dde7e0e46c252317d3">createSwapchain</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> pvrvk::Surface&amp; surface, pvr::DisplayAttributes&amp; displayAttributes,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    pvrvk::ImageUsageFlags swapchainImageUsageFlags = pvrvk::ImageUsageFlags::e_COLOR_ATTACHMENT_BIT);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a21012ef6146e3eb4d55ac09d0be368fd">createSwapchainAndDepthStencilImageAndViews</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> pvrvk::Surface&amp; surface, pvr::DisplayAttributes&amp; displayAttributes, pvrvk::Swapchain&amp; outSwapchain,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    Multi&lt;pvrvk::ImageView&gt;&amp; outDepthStencil, pvrvk::Format* preferredColorFormats, uint32_t numColorFormats, pvrvk::Format* preferredDepthStencilFormats,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    uint32_t numDepthStencilFormats, <span class="keyword">const</span> pvrvk::ImageUsageFlags&amp; swapchainImageUsageFlags = pvrvk::ImageUsageFlags::e_COLOR_ATTACHMENT_BIT,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keyword">const</span> pvrvk::ImageUsageFlags&amp; dsImageUsageFlags = pvrvk::ImageUsageFlags::e_DEPTH_STENCIL_ATTACHMENT_BIT | pvrvk::ImageUsageFlags::e_TRANSIENT_ATTACHMENT_BIT,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    vma::Allocator* dsImageAllocator = <span class="keyword">nullptr</span>, vma::AllocationCreateFlags dsImageAllocationCreateFlags = vma::AllocationCreateFlags::e_DEDICATED_MEMORY_BIT);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a21012ef6146e3eb4d55ac09d0be368fd">createSwapchainAndDepthStencilImageAndViews</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> pvrvk::Surface&amp; surface, pvr::DisplayAttributes&amp; displayAttributes, pvrvk::Swapchain&amp; outSwapchain,</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    Multi&lt;pvrvk::ImageView&gt;&amp; outDepthStencil, <span class="keyword">const</span> pvrvk::ImageUsageFlags&amp; swapchainImageUsageFlags = pvrvk::ImageUsageFlags::e_COLOR_ATTACHMENT_BIT,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keyword">const</span> pvrvk::ImageUsageFlags&amp; dsImageUsageFlags = pvrvk::ImageUsageFlags::e_DEPTH_STENCIL_ATTACHMENT_BIT | pvrvk::ImageUsageFlags::e_TRANSIENT_ATTACHMENT_BIT,</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    vma::Allocator* dsImageAllocator = <span class="keyword">nullptr</span>, vma::AllocationCreateFlags dsImageAllocationCreateFlags = vma::AllocationCreateFlags::e_DEDICATED_MEMORY_BIT);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a021b5205f52c9a4d0cdd26ce9e1f03a7">  599</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a021b5205f52c9a4d0cdd26ce9e1f03a7">createOnscreenFramebufferAndRenderpass</a>(pvrvk::Swapchain&amp; swapchain, pvrvk::ImageView* depthStencilImages, Multi&lt;pvrvk::Framebuffer&gt;&amp; outFramebuffers,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    pvrvk::RenderPass&amp; outRenderPass, pvrvk::ImageLayout initialSwapchainLayout = pvrvk::ImageLayout::e_UNDEFINED,</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    pvrvk::ImageLayout initialDepthStencilLayout = pvrvk::ImageLayout::e_UNDEFINED)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;{</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    pvrvk::FramebufferCreateInfo framebufferInfos[pvrvk::FrameworkCaps::MaxSwapChains];</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    pvrvk::RenderPassCreateInfo rpInfo;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    rpInfo.setAttachmentDescription(</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        0, pvrvk::AttachmentDescription::createColorDescription(swapchain-&gt;getImageFormat(), initialSwapchainLayout, pvrvk::ImageLayout::e_PRESENT_SRC_KHR));</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    pvrvk::SubpassDescription subpass;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    subpass.setColorAttachmentReference(0, pvrvk::AttachmentReference(0, pvrvk::ImageLayout::e_COLOR_ATTACHMENT_OPTIMAL));</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (depthStencilImages != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        rpInfo.setAttachmentDescription(1, pvrvk::AttachmentDescription::createDepthStencilDescription(depthStencilImages[0]-&gt;getImage()-&gt;getFormat(), initialDepthStencilLayout));</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        subpass.setDepthStencilAttachmentReference(pvrvk::AttachmentReference(1, pvrvk::ImageLayout::e_DEPTH_STENCIL_ATTACHMENT_OPTIMAL));</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    pvrvk::SubpassDependency dependencies[2] = { pvrvk::SubpassDependency(pvrvk::SubpassExternal, 0, pvrvk::PipelineStageFlags::e_BOTTOM_OF_PIPE_BIT,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                                     pvrvk::PipelineStageFlags::e_COLOR_ATTACHMENT_OUTPUT_BIT, pvrvk::AccessFlags::e_MEMORY_READ_BIT,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                                     pvrvk::AccessFlags::e_COLOR_ATTACHMENT_READ_BIT | pvrvk::AccessFlags::e_COLOR_ATTACHMENT_WRITE_BIT,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                                                     pvrvk::DependencyFlags::e_BY_REGION_BIT),</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        pvrvk::SubpassDependency(0, pvrvk::SubpassExternal, pvrvk::PipelineStageFlags::e_COLOR_ATTACHMENT_OUTPUT_BIT, pvrvk::PipelineStageFlags::e_BOTTOM_OF_PIPE_BIT,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            pvrvk::AccessFlags::e_COLOR_ATTACHMENT_READ_BIT | pvrvk::AccessFlags::e_COLOR_ATTACHMENT_WRITE_BIT, pvrvk::AccessFlags::e_MEMORY_READ_BIT,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            pvrvk::DependencyFlags::e_BY_REGION_BIT) };</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    rpInfo.addSubpassDependencies(dependencies, ARRAY_SIZE(dependencies));</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    rpInfo.setSubpass(0, subpass);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    outRenderPass = swapchain-&gt;getDevice()-&gt;createRenderPass(rpInfo);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    outRenderPass-&gt;setObjectName(<span class="stringliteral">&quot;PVRUtilsVk::OnScreenRenderpass&quot;</span>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; swapchain-&gt;getSwapchainLength(); ++i)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        framebufferInfos[i].setAttachment(0, swapchain-&gt;getImageView(i));</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        framebufferInfos[i].setDimensions(swapchain-&gt;getDimension());</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">if</span> (depthStencilImages)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            framebufferInfos[i].setAttachment(1, depthStencilImages[i]);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        framebufferInfos[i].setRenderPass(outRenderPass);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        outFramebuffers[i] = swapchain-&gt;getDevice()-&gt;createFramebuffer(framebufferInfos[i]);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        outFramebuffers[i]-&gt;setObjectName(std::string(<span class="stringliteral">&quot;PVRUtilsVk::OnScreenFrameBuffer [&quot;</span>) + std::to_string(i) + std::string(<span class="stringliteral">&quot;]&quot;</span>));</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#aecfe23b63ffc4cc0fae6624b389f9572">  665</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a021b5205f52c9a4d0cdd26ce9e1f03a7">createOnscreenFramebufferAndRenderpass</a>(pvrvk::Swapchain&amp; swapchain, pvrvk::ImageView* depthStencilImages, Multi&lt;pvrvk::Framebuffer&gt;&amp; outFramebuffers,</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    pvrvk::ImageLayout initialSwapchainLayout = pvrvk::ImageLayout::e_UNDEFINED, pvrvk::ImageLayout initialDepthStencilLayout = pvrvk::ImageLayout::e_UNDEFINED)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;{</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    pvrvk::RenderPass dummy;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="namespacepvr_1_1utils.html#a021b5205f52c9a4d0cdd26ce9e1f03a7">createOnscreenFramebufferAndRenderpass</a>(swapchain, depthStencilImages, outFramebuffers, dummy, initialSwapchainLayout, initialDepthStencilLayout);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a0688d6e1f181259f4000994896d5157b">  675</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a0688d6e1f181259f4000994896d5157b">populateViewportStateCreateInfo</a>(<span class="keyword">const</span> pvrvk::Framebuffer&amp; framebuffer, pvrvk::ViewportStateCreateInfo&amp; outCreateInfo)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    outCreateInfo.setViewportAndScissor(0,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        pvrvk::Viewport(0.f, 0.f, static_cast&lt;float&gt;(framebuffer-&gt;getDimensions().getWidth()), static_cast&lt;float&gt;(framebuffer-&gt;getDimensions().getHeight())),</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        pvrvk::Rect2D(pvrvk::Offset2D(0, 0), pvrvk::Extent2D(framebuffer-&gt;getDimensions().getWidth(), framebuffer-&gt;getDimensions().getHeight())));</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vertex_bindings.html">  683</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_vertex_bindings.html">VertexBindings</a></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;{</div>
<div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vertex_bindings.html#a74f6b69852fdb3031ef27bdffa5e2c99">  686</a></span>&#160;    std::string <a class="code" href="structpvr_1_1utils_1_1_vertex_bindings.html#a74f6b69852fdb3031ef27bdffa5e2c99">semanticName</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vertex_bindings.html#ab06b267b0543d9b3f4dff021027f1609">  689</a></span>&#160;    int16_t <a class="code" href="structpvr_1_1utils_1_1_vertex_bindings.html#ab06b267b0543d9b3f4dff021027f1609">binding</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;};</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vertex_bindings___name.html">  693</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_vertex_bindings___name.html">VertexBindings_Name</a></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;{</div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vertex_bindings___name.html#a20e78764d5aab84abdc052ea3e43a965">  696</a></span>&#160;    StringHash <a class="code" href="structpvr_1_1utils_1_1_vertex_bindings___name.html#a20e78764d5aab84abdc052ea3e43a965">semantic</a>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vertex_bindings___name.html#af8dc9152ecaae65489a154363a672747">  699</a></span>&#160;    StringHash <a class="code" href="structpvr_1_1utils_1_1_vertex_bindings___name.html#af8dc9152ecaae65489a154363a672747">variableName</a>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;};</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a40ca7bc0dc1b494e3b13e654bf582012">  710</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a40ca7bc0dc1b494e3b13e654bf582012">populateInputAssemblyFromMesh</a>(<span class="keyword">const</span> assets::Mesh&amp; mesh, <span class="keyword">const</span> <a class="code" href="structpvr_1_1utils_1_1_vertex_bindings.html">VertexBindings</a>* bindingMap, uint16_t numBindings,</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    pvrvk::PipelineVertexInputStateCreateInfo&amp; vertexCreateInfo, pvrvk::InputAssemblerStateCreateInfo&amp; inputAssemblerCreateInfo, uint16_t* numOutBuffers = <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;{</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    vertexCreateInfo.clear();</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (numOutBuffers)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        *numOutBuffers = 0;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    int16_t current = 0;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">while</span> (current &lt; numBindings)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keyword">auto</span> attr = mesh.getVertexAttributeByName(bindingMap[current].semanticName.c_str());</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">if</span> (attr)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            VertexAttributeLayout layout = attr-&gt;getVertexLayout();</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            uint32_t stride = mesh.getStride(attr-&gt;getDataIndex());</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <span class="keywordflow">if</span> (numOutBuffers)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                *numOutBuffers = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(std::max&lt;int32_t&gt;(attr-&gt;getDataIndex() + 1, *numOutBuffers));</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <span class="keyword">const</span> pvrvk::VertexInputAttributeDescription attribDesc(</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                bindingMap[current].binding, attr-&gt;getDataIndex(), convertToPVRVkVertexInputFormat(layout.dataType, layout.width), layout.offset);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="keyword">const</span> pvrvk::VertexInputBindingDescription bindingDesc(attr-&gt;getDataIndex(), stride, pvrvk::VertexInputRate::e_VERTEX);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            vertexCreateInfo.addInputAttribute(attribDesc).addInputBinding(bindingDesc);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            Log(<span class="stringliteral">&quot;Could not find Attribute with Semantic %s in the supplied mesh. Will render without binding it, erroneously.&quot;</span>, bindingMap[current].semanticName.c_str());</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        ++current;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    inputAssemblerCreateInfo.setPrimitiveTopology(convertToPVRVk(mesh.getMeshInfo().primitiveType));</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#adf7346cd6cd2ef2705d14ab35284f045">  754</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a40ca7bc0dc1b494e3b13e654bf582012">populateInputAssemblyFromMesh</a>(<span class="keyword">const</span> assets::Mesh&amp; mesh, <span class="keyword">const</span> <a class="code" href="structpvr_1_1utils_1_1_vertex_bindings___name.html">VertexBindings_Name</a>* bindingMap, uint16_t numBindings,</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    pvrvk::PipelineVertexInputStateCreateInfo&amp; vertexCreateInfo, pvrvk::InputAssemblerStateCreateInfo&amp; inputAssemblerCreateInfo, uint16_t* numOutBuffers = <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;{</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    vertexCreateInfo.clear();</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (numOutBuffers)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        *numOutBuffers = 0;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    int16_t current = 0;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// In this scenario, we will be using our own indexes instead of user provided ones, correlating them by names.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    vertexCreateInfo.clear();</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">while</span> (current &lt; numBindings)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keyword">auto</span> attr = mesh.getVertexAttributeByName(bindingMap[current].semantic);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">if</span> (attr)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            VertexAttributeLayout layout = attr-&gt;getVertexLayout();</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            uint32_t stride = mesh.getStride(attr-&gt;getDataIndex());</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="keywordflow">if</span> (numOutBuffers)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                *numOutBuffers = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(std::max&lt;int32_t&gt;(attr-&gt;getDataIndex() + 1, *numOutBuffers));</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <span class="keyword">const</span> pvrvk::VertexInputAttributeDescription attribDesc(current, attr-&gt;getDataIndex(), convertToPVRVkVertexInputFormat(layout.dataType, layout.width), layout.offset);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="keyword">const</span> pvrvk::VertexInputBindingDescription bindingDesc(attr-&gt;getDataIndex(), stride, pvrvk::VertexInputRate::e_VERTEX);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            vertexCreateInfo.addInputAttribute(attribDesc).addInputBinding(bindingDesc);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            inputAssemblerCreateInfo.setPrimitiveTopology(convertToPVRVk(mesh.getMeshInfo().primitiveType));</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            Log(<span class="stringliteral">&quot;Could not find Attribute with Semantic %s in the supplied mesh. Will render without binding it, erroneously.&quot;</span>, bindingMap[current].semantic.c_str());</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        ++current;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#ae6934715b675cba2e0a7454813b431a3">  807</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#ae6934715b675cba2e0a7454813b431a3">createSingleBuffersFromMesh</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> assets::Mesh&amp; mesh, pvrvk::Buffer&amp; outVbo, pvrvk::Buffer&amp; outIbo, pvrvk::CommandBuffer&amp; uploadCmdBuffer,</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordtype">bool</span>&amp; requiresCommandBufferSubmission, vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>, vma::AllocationCreateFlags vmaAllocationCreateFlags = vma::AllocationCreateFlags::e_MAPPED_BIT)</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;{</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    requiresCommandBufferSubmission = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordtype">size_t</span> total = 0;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; mesh.getNumDataElements(); ++i)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        total += mesh.getDataSize(i);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    pvrvk::MemoryPropertyFlags requiredMemoryFlags = pvrvk::MemoryPropertyFlags::e_DEVICE_LOCAL_BIT;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    pvrvk::MemoryPropertyFlags optimalMemoryFlags = requiredMemoryFlags;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    outVbo = <a class="code" href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">createBuffer</a>(device, static_cast&lt;uint32_t&gt;(mesh.getDataSize(0)), pvrvk::BufferUsageFlags::e_VERTEX_BUFFER_BIT | pvrvk::BufferUsageFlags::e_TRANSFER_DST_BIT,</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        requiredMemoryFlags, optimalMemoryFlags, bufferAllocator, vmaAllocationCreateFlags);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordtype">bool</span> isBufferHostVisible = (outVbo-&gt;getDeviceMemory()-&gt;getMemoryFlags() &amp; pvrvk::MemoryPropertyFlags::e_HOST_VISIBLE_BIT) != 0;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> (!isBufferHostVisible)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        requiresCommandBufferSubmission = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordtype">size_t</span> current = 0;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; mesh.getNumDataElements(); ++i)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordflow">if</span> (isBufferHostVisible)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <a class="code" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">updateHostVisibleBuffer</a>(outVbo, static_cast&lt;const void*&gt;(mesh.getData(i)), static_cast&lt;uint32_t&gt;(current), <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(mesh.getDataSize(i)), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <a class="code" href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">updateBufferUsingStagingBuffer</a>(device, outVbo, pvrvk::CommandBufferBase(uploadCmdBuffer), static_cast&lt;const void*&gt;(mesh.getData(i)), static_cast&lt;uint32_t&gt;(current),</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(mesh.getDataSize(i)), bufferAllocator);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        current += mesh.getDataSize(i);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">if</span> (mesh.getNumFaces())</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        pvrvk::MemoryPropertyFlags requiredMemoryFlags = pvrvk::MemoryPropertyFlags::e_DEVICE_LOCAL_BIT;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        pvrvk::MemoryPropertyFlags optimalMemoryFlags = requiredMemoryFlags;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        outIbo = <a class="code" href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">createBuffer</a>(device, static_cast&lt;uint32_t&gt;(mesh.getFaces().getDataSize()), pvrvk::BufferUsageFlags::e_INDEX_BUFFER_BIT | pvrvk::BufferUsageFlags::e_TRANSFER_DST_BIT,</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            requiredMemoryFlags, optimalMemoryFlags, bufferAllocator, vmaAllocationCreateFlags);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordtype">bool</span> isBufferHostVisible = (outIbo-&gt;getDeviceMemory()-&gt;getMemoryFlags() &amp; pvrvk::MemoryPropertyFlags::e_HOST_VISIBLE_BIT) != 0;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">if</span> (!isBufferHostVisible)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            requiresCommandBufferSubmission = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">if</span> (isBufferHostVisible)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <a class="code" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">updateHostVisibleBuffer</a>(outIbo, static_cast&lt;const void*&gt;(mesh.getFaces().getData()), 0, static_cast&lt;uint32_t&gt;(mesh.getFaces().getDataSize()), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <a class="code" href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">updateBufferUsingStagingBuffer</a>(device, outIbo, pvrvk::CommandBufferBase(uploadCmdBuffer), static_cast&lt;const void*&gt;(mesh.getFaces().getData()), 0,</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                static_cast&lt;uint32_t&gt;(mesh.getFaces().getDataSize()), bufferAllocator);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        outIbo.reset();</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;}</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00891"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a95e0a5be7c444548e52a74c2f40faaa5">  891</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a95e0a5be7c444548e52a74c2f40faaa5">createMultipleBuffersFromMesh</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> assets::Mesh&amp; mesh, std::vector&lt;pvrvk::Buffer&gt;&amp; outVbos, pvrvk::Buffer&amp; outIbo,</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    pvrvk::CommandBuffer&amp; uploadCmdBuffer, <span class="keywordtype">bool</span>&amp; requiresCommandBufferSubmission, vma::Allocator* bufferAllocator,</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    vma::AllocationCreateFlags vmaAllocationCreateFlags = vma::AllocationCreateFlags::e_MAPPED_BIT)</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;{</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    requiresCommandBufferSubmission = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; mesh.getNumDataElements(); ++i)</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        pvrvk::MemoryPropertyFlags requiredMemoryFlags = pvrvk::MemoryPropertyFlags::e_DEVICE_LOCAL_BIT;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        pvrvk::MemoryPropertyFlags optimalMemoryFlags = requiredMemoryFlags;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        outVbos.push_back(<a class="code" href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">createBuffer</a>(device, static_cast&lt;uint32_t&gt;(mesh.getDataSize(i)), pvrvk::BufferUsageFlags::e_VERTEX_BUFFER_BIT | pvrvk::BufferUsageFlags::e_TRANSFER_DST_BIT,</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            requiredMemoryFlags, optimalMemoryFlags, bufferAllocator, vmaAllocationCreateFlags));</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordtype">bool</span> isBufferHostVisible = (outVbos.back()-&gt;getDeviceMemory()-&gt;getMemoryFlags() &amp; pvrvk::MemoryPropertyFlags::e_HOST_VISIBLE_BIT) != 0;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">if</span> (!isBufferHostVisible)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            requiresCommandBufferSubmission = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">if</span> (isBufferHostVisible)</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <a class="code" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">updateHostVisibleBuffer</a>(outVbos.back(), <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(mesh.getData(i)), 0, static_cast&lt;uint32_t&gt;(mesh.getDataSize(i)), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <a class="code" href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">updateBufferUsingStagingBuffer</a>(device, outVbos.back(), pvrvk::CommandBufferBase(uploadCmdBuffer), <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(mesh.getData(i)), 0,</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                static_cast&lt;uint32_t&gt;(mesh.getDataSize(i)), bufferAllocator);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">if</span> (mesh.getNumFaces())</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        pvrvk::MemoryPropertyFlags requiredMemoryFlags = pvrvk::MemoryPropertyFlags::e_DEVICE_LOCAL_BIT;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        pvrvk::MemoryPropertyFlags optimalMemoryFlags = requiredMemoryFlags;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        outIbo = <a class="code" href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">createBuffer</a>(device, static_cast&lt;uint32_t&gt;(mesh.getFaces().getDataSize()), pvrvk::BufferUsageFlags::e_INDEX_BUFFER_BIT | pvrvk::BufferUsageFlags::e_TRANSFER_DST_BIT,</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            requiredMemoryFlags, optimalMemoryFlags, bufferAllocator, vmaAllocationCreateFlags);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordtype">bool</span> isBufferHostVisible = (outIbo-&gt;getDeviceMemory()-&gt;getMemoryFlags() &amp; pvrvk::MemoryPropertyFlags::e_HOST_VISIBLE_BIT) != 0;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">if</span> (!isBufferHostVisible)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            requiresCommandBufferSubmission = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">if</span> (isBufferHostVisible)</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <a class="code" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">updateHostVisibleBuffer</a>(outIbo, static_cast&lt;const void*&gt;(mesh.getFaces().getData()), 0, static_cast&lt;uint32_t&gt;(mesh.getFaces().getDataSize()), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <a class="code" href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">updateBufferUsingStagingBuffer</a>(device, outIbo, pvrvk::CommandBufferBase(uploadCmdBuffer), static_cast&lt;const void*&gt;(mesh.getFaces().getData()), 0,</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                static_cast&lt;uint32_t&gt;(mesh.getFaces().getDataSize()), bufferAllocator);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MeshIterator_, <span class="keyword">typename</span> VboInsertIterator_, <span class="keyword">typename</span> IboInsertIterator_&gt;</div>
<div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a06f94be9a865755c8bafaac56f286b01">  971</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a06f94be9a865755c8bafaac56f286b01">createSingleBuffersFromMeshes</a>(pvrvk::Device&amp; device, MeshIterator_ meshIter, MeshIterator_ meshIterEnd, VboInsertIterator_ outVbos, IboInsertIterator_ outIbos,</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    pvrvk::CommandBuffer&amp; uploadCmdBuffer, <span class="keywordtype">bool</span>&amp; requiresCommandBufferSubmission, vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    vma::AllocationCreateFlags vmaAllocationCreateFlags = vma::AllocationCreateFlags::e_MAPPED_BIT)</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;{</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    requiresCommandBufferSubmission = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">while</span> (meshIter != meshIterEnd)</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordtype">size_t</span> total = 0;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">for</span> (uint32_t ii = 0; ii &lt; meshIter-&gt;getNumDataElements(); ++ii)</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            total += meshIter-&gt;getDataSize(ii);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        pvrvk::Buffer vbo;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        pvrvk::MemoryPropertyFlags requiredMemoryFlags = pvrvk::MemoryPropertyFlags::e_DEVICE_LOCAL_BIT;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        pvrvk::MemoryPropertyFlags optimalMemoryFlags = requiredMemoryFlags;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        vbo = <a class="code" href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">createBuffer</a>(device, static_cast&lt;uint32_t&gt;(total), pvrvk::BufferUsageFlags::e_VERTEX_BUFFER_BIT | pvrvk::BufferUsageFlags::e_TRANSFER_DST_BIT, requiredMemoryFlags,</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            optimalMemoryFlags, bufferAllocator, vmaAllocationCreateFlags);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordtype">bool</span> isBufferHostVisible = (vbo-&gt;getDeviceMemory()-&gt;getMemoryFlags() &amp; pvrvk::MemoryPropertyFlags::e_HOST_VISIBLE_BIT) != 0;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">if</span> (!isBufferHostVisible)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            requiresCommandBufferSubmission = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordtype">size_t</span> current = 0;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> ii = 0; ii &lt; meshIter-&gt;getNumDataElements(); ++ii)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">if</span> (isBufferHostVisible)</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                <a class="code" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">updateHostVisibleBuffer</a>(vbo, (<span class="keyword">const</span> <span class="keywordtype">void</span>*)meshIter-&gt;getData(static_cast&lt;uint32_t&gt;(ii)), <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(current),</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    static_cast&lt;uint32_t&gt;(meshIter-&gt;getDataSize(static_cast&lt;uint32_t&gt;(ii))), <span class="keyword">true</span>);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                <a class="code" href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">updateBufferUsingStagingBuffer</a>(device, vbo, pvrvk::CommandBufferBase(uploadCmdBuffer), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)meshIter-&gt;getData(static_cast&lt;uint32_t&gt;(ii)),</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                    <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(current), static_cast&lt;uint32_t&gt;(meshIter-&gt;getDataSize(static_cast&lt;uint32_t&gt;(ii))), bufferAllocator);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            current += meshIter-&gt;getDataSize(static_cast&lt;uint32_t&gt;(ii));</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        outVbos = vbo;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="keywordflow">if</span> (meshIter-&gt;getNumFaces())</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            pvrvk::Buffer ibo;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            pvrvk::MemoryPropertyFlags requiredMemoryFlags = pvrvk::MemoryPropertyFlags::e_DEVICE_LOCAL_BIT;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            pvrvk::MemoryPropertyFlags optimalMemoryFlags = requiredMemoryFlags;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            ibo = <a class="code" href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">createBuffer</a>(device, static_cast&lt;uint32_t&gt;(meshIter-&gt;getFaces().getDataSize()),</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                pvrvk::BufferUsageFlags::e_INDEX_BUFFER_BIT | pvrvk::BufferUsageFlags::e_TRANSFER_DST_BIT, requiredMemoryFlags, optimalMemoryFlags, bufferAllocator,</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                vmaAllocationCreateFlags);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            <span class="keywordtype">bool</span> isBufferHostVisible = (ibo-&gt;getDeviceMemory()-&gt;getMemoryFlags() &amp; pvrvk::MemoryPropertyFlags::e_HOST_VISIBLE_BIT) != 0;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <span class="keywordflow">if</span> (!isBufferHostVisible)</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                requiresCommandBufferSubmission = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordflow">if</span> (isBufferHostVisible)</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                <a class="code" href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">updateHostVisibleBuffer</a>(ibo, static_cast&lt;const void*&gt;(meshIter-&gt;getFaces().getData()), 0, meshIter-&gt;getFaces().getDataSize(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                <a class="code" href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">updateBufferUsingStagingBuffer</a>(device, ibo, pvrvk::CommandBufferBase(uploadCmdBuffer), static_cast&lt;const void*&gt;(meshIter-&gt;getFaces().getData()), 0,</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                    meshIter-&gt;getFaces().getDataSize(), bufferAllocator);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            outIbos = ibo;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            outIbos = pvrvk::Buffer();</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        ++outVbos;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        ++outIbos;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        ++i;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        ++meshIter;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;}</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MeshIterator_, <span class="keyword">typename</span> VboContainer_, <span class="keyword">typename</span> IboContainer_&gt;</div>
<div class="line"><a name="l01080"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a4493b0c69e45e8b7af4d2fa32f763f23"> 1080</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a06f94be9a865755c8bafaac56f286b01">createSingleBuffersFromMeshes</a>(pvrvk::Device&amp; device, MeshIterator_ meshIter, MeshIterator_ meshIterEnd, VboContainer_&amp; outVbos,</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keyword">typename</span> VboContainer_::iterator vbos_where, IboContainer_&amp; outIbos, <span class="keyword">typename</span> IboContainer_::iterator ibos_where, pvrvk::CommandBuffer&amp; uploadCmdBuffer,</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordtype">bool</span>&amp; requiresCommandBufferSubmission, vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>, vma::AllocationCreateFlags vmaAllocationCreateFlags = vma::AllocationCreateFlags::e_MAPPED_BIT)</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;{</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <a class="code" href="namespacepvr_1_1utils.html#a06f94be9a865755c8bafaac56f286b01">createSingleBuffersFromMeshes</a>(device, meshIter, meshIterEnd, std::inserter(outVbos, vbos_where), std::inserter(outIbos, ibos_where), uploadCmdBuffer,</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        requiresCommandBufferSubmission, bufferAllocator, vmaAllocationCreateFlags);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;}</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> VboInsertIterator_, <span class="keyword">typename</span> IboInsertIterator_&gt;</div>
<div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a8b77d306417876f431ed11fffde3a84f"> 1108</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a8b77d306417876f431ed11fffde3a84f">createSingleBuffersFromModel</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> assets::Model&amp; model, VboInsertIterator_ vbos, IboInsertIterator_ ibos, pvrvk::CommandBuffer&amp; uploadCmdBuffer,</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordtype">bool</span>&amp; requiresCommandBufferSubmission, vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>, vma::AllocationCreateFlags vmaAllocationCreateFlags = vma::AllocationCreateFlags::e_MAPPED_BIT)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;{</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <a class="code" href="namespacepvr_1_1utils.html#a06f94be9a865755c8bafaac56f286b01">createSingleBuffersFromMeshes</a>(</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        device, model.beginMeshes(), model.endMeshes(), vbos, ibos, uploadCmdBuffer, requiresCommandBufferSubmission, bufferAllocator, vmaAllocationCreateFlags);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;}</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> VboContainer_, <span class="keyword">typename</span> IboContainer_&gt;</div>
<div class="line"><a name="l01133"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#ac66fa9a9c7f8232c3f5aa3f41106cfea"> 1133</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#ac66fa9a9c7f8232c3f5aa3f41106cfea">appendSingleBuffersFromModel</a>(pvrvk::Device&amp; device, <span class="keyword">const</span> assets::Model&amp; model, VboContainer_&amp; vbos, IboContainer_&amp; ibos, pvrvk::CommandBuffer&amp; uploadCmdBuffer,</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordtype">bool</span>&amp; requiresCommandBufferSubmission, vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>, vma::AllocationCreateFlags vmaAllocationCreateFlags = vma::AllocationCreateFlags::e_MAPPED_BIT)</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;{</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <a class="code" href="namespacepvr_1_1utils.html#a06f94be9a865755c8bafaac56f286b01">createSingleBuffersFromMeshes</a>(device, model.beginMeshes(), model.endMeshes(), std::inserter(vbos, vbos.end()), std::inserter(ibos, ibos.end()), uploadCmdBuffer,</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        requiresCommandBufferSubmission, bufferAllocator, vmaAllocationCreateFlags);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;}</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#ad0c9ce4267ec635305fc87aba0b9d9c2">create3dPlaneMesh</a>(uint32_t width, uint32_t depth, <span class="keywordtype">bool</span> generateTexCoords, <span class="keywordtype">bool</span> generateNormalCoords, assets::Mesh&amp; outMesh);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#abca543a0c306d801f96b0cc6af848371">saveImage</a>(<a class="code" href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvrvk::Image</a> image, <span class="keyword">const</span> pvrvk::ImageLayout imageInitialLayout, <span class="keyword">const</span> pvrvk::ImageLayout imageFinalLayout, pvrvk::CommandPool&amp; pool, pvrvk::Queue&amp; queue,</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keyword">const</span> std::string&amp; filename, vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>, <span class="keyword">const</span> uint32_t screenshotScale = 1);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacepvr_1_1utils.html#a22821a94e895873a43ffa097381a1415">takeScreenshot</a>(pvrvk::Swapchain&amp; swapChain, <span class="keyword">const</span> uint32_t swapIndex, pvrvk::CommandPool&amp; pool, pvrvk::Queue&amp; queue, <span class="keyword">const</span> std::string&amp; screenshotFileName,</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    vma::Allocator* bufferAllocator = <span class="keyword">nullptr</span>, vma::Allocator* imageAllocator = <span class="keyword">nullptr</span>, <span class="keyword">const</span> uint32_t screenshotScale = 1);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div>
<div class="line"><a name="l01180"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a7151c7b74ff657fc17ff09c0ab114a07"> 1180</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacepvr_1_1utils.html#a7151c7b74ff657fc17ff09c0ab114a07">isFormatDepthStencil</a>(pvrvk::Format format)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">return</span> format &gt;= pvrvk::Format::e_D16_UNORM &amp;&amp; format &lt;= pvrvk::Format::e_D32_SFLOAT_S8_UINT;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01192"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a98e4ac9990af6eaf6b9bf0928f2bd07d"> 1192</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a98e4ac9990af6eaf6b9bf0928f2bd07d">populateClearValues</a>(</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keyword">const</span> pvrvk::RenderPass&amp; renderpass, <span class="keyword">const</span> pvrvk::ClearValue&amp; clearColor, <span class="keyword">const</span> pvrvk::ClearValue&amp; clearDepthStencilValue, pvrvk::ClearValue* outClearValues)</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; renderpass-&gt;getCreateInfo().getNumAttachmentDescription(); ++i)</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keyword">const</span> pvrvk::Format&amp; format = renderpass-&gt;getCreateInfo().getAttachmentDescription(i).getFormat();</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacepvr_1_1utils.html#a7151c7b74ff657fc17ff09c0ab114a07">pvr::utils::isFormatDepthStencil</a>(format))</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            outClearValues[i] = clearDepthStencilValue;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            outClearValues[i] = clearColor;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;}</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div>
<div class="line"><a name="l01212"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#adca914d6eedd686a81a4f0e4cbbc3390"> 1212</a></span>&#160;<span class="keyword">inline</span> LogLevel <a class="code" href="namespacepvr_1_1utils.html#adca914d6eedd686a81a4f0e4cbbc3390">mapValidationTypeToLogLevel</a>(pvrvk::DebugReportFlagsEXT flags)</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;{</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordflow">if</span> ((flags &amp; pvrvk::DebugReportFlagsEXT::e_INFORMATION_BIT_EXT) != 0)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">return</span> LogLevel::Information;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordflow">if</span> ((flags &amp; pvrvk::DebugReportFlagsEXT::e_WARNING_BIT_EXT) != 0)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">return</span> LogLevel::Warning;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> ((flags &amp; pvrvk::DebugReportFlagsEXT::e_PERFORMANCE_WARNING_BIT_EXT) != 0)</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordflow">return</span> LogLevel::Performance;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span> ((flags &amp; pvrvk::DebugReportFlagsEXT::e_ERROR_BIT_EXT) != 0)</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">return</span> LogLevel::Error;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">if</span> ((flags &amp; pvrvk::DebugReportFlagsEXT::e_DEBUG_BIT_EXT) != 0)</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="keywordflow">return</span> LogLevel::Debug;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordflow">return</span> LogLevel::Information;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;}</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;VKAPI_ATTR VkBool32 VKAPI_CALL <a class="code" href="namespacepvr_1_1utils.html#a54f2bb511b50d2c11ddc7377a60714ad">throwOnErrorDebugReportCallback</a>(VkDebugReportFlagsEXT flags, VkDebugReportObjectTypeEXT objectType, uint64_t <span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> location,</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    int32_t messageCode, <span class="keyword">const</span> <span class="keywordtype">char</span>* pLayerPrefix, <span class="keyword">const</span> <span class="keywordtype">char</span>* pMessage, <span class="keywordtype">void</span>* pUserData);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;VKAPI_ATTR VkBool32 VKAPI_CALL <a class="code" href="namespacepvr_1_1utils.html#a1cbbbd1665449ea70d772de63595c806">logMessageDebugReportCallback</a>(VkDebugReportFlagsEXT flags, VkDebugReportObjectTypeEXT objectType, uint64_t <span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> location,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    int32_t messageCode, <span class="keyword">const</span> <span class="keywordtype">char</span>* pLayerPrefix, <span class="keyword">const</span> <span class="keywordtype">char</span>* pMessage, <span class="keywordtype">void</span>* pUserData);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;pvrvk::DebugReportCallback <a class="code" href="namespacepvr_1_1utils.html#a04b412166c06b4293b7eaa1bf6857f50">createDebugReportCallback</a>(pvrvk::Instance&amp; instance,</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    pvrvk::DebugReportFlagsEXT flags = pvrvk::DebugReportFlagsEXT::e_ERROR_BIT_EXT | pvrvk::DebugReportFlagsEXT::e_PERFORMANCE_WARNING_BIT_EXT |</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        pvrvk::DebugReportFlagsEXT::e_WARNING_BIT_EXT,</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    PFN_vkDebugReportCallbackEXT callback = <a class="code" href="namespacepvr_1_1utils.html#a1cbbbd1665449ea70d772de63595c806">pvr::utils::logMessageDebugReportCallback</a>, <span class="keywordtype">void</span>* userData = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div>
<div class="line"><a name="l01273"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vulkan_version.html"> 1273</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html">VulkanVersion</a></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;{</div>
<div class="line"><a name="l01276"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vulkan_version.html#ae034e617f8481394b0d37b6ddaa228fd"> 1276</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#ae034e617f8481394b0d37b6ddaa228fd">majorV</a>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vulkan_version.html#a6c8a350c06cf3c659a092f0688f860b2"> 1278</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a6c8a350c06cf3c659a092f0688f860b2">minorV</a>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vulkan_version.html#a3e1b806e01b77ae8589182a3d55cb00d"> 1280</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a3e1b806e01b77ae8589182a3d55cb00d">patchV</a>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01286"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vulkan_version.html#a93aa7e756fb29313e3556bb4f5c10f3a"> 1286</a></span>&#160;    <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a93aa7e756fb29313e3556bb4f5c10f3a">VulkanVersion</a>(uint32_t <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#ae034e617f8481394b0d37b6ddaa228fd">majorV</a> = 1, uint32_t <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a6c8a350c06cf3c659a092f0688f860b2">minorV</a> = 1, uint32_t <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a3e1b806e01b77ae8589182a3d55cb00d">patchV</a> = 0) : <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#ae034e617f8481394b0d37b6ddaa228fd">majorV</a>(<a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#ae034e617f8481394b0d37b6ddaa228fd">majorV</a>), <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a6c8a350c06cf3c659a092f0688f860b2">minorV</a>(<a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a6c8a350c06cf3c659a092f0688f860b2">minorV</a>), <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a3e1b806e01b77ae8589182a3d55cb00d">patchV</a>(<a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a3e1b806e01b77ae8589182a3d55cb00d">patchV</a>) {}</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div>
<div class="line"><a name="l01290"></a><span class="lineno"><a class="line" href="structpvr_1_1utils_1_1_vulkan_version.html#a4a7dfa46502a507457263578dd48e572"> 1290</a></span>&#160;    uint32_t <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a4a7dfa46502a507457263578dd48e572">toVulkanVersion</a>()</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keywordflow">return</span> VK_MAKE_VERSION(<a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#ae034e617f8481394b0d37b6ddaa228fd">majorV</a>, <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a6c8a350c06cf3c659a092f0688f860b2">minorV</a>, <a class="code" href="structpvr_1_1utils_1_1_vulkan_version.html#a3e1b806e01b77ae8589182a3d55cb00d">patchV</a>);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;};</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;pvrvk::Instance <a class="code" href="namespacepvr_1_1utils.html#a680ef5943947e565f7d14aa9ff0393d9">createInstance</a>(<span class="keyword">const</span> std::string&amp; applicationName, VulkanVersion apiVersion = VulkanVersion(), <span class="keyword">const</span> InstanceExtensions&amp; instanceExtensions = InstanceExtensions(),</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keyword">const</span> InstanceLayers&amp; instanceLayers = InstanceLayers());</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;pvrvk::Surface <a class="code" href="namespacepvr_1_1utils.html#aa583027696be258fc78dd3156ffaece5">createSurface</a>(pvrvk::Instance&amp; instance, pvrvk::PhysicalDevice&amp; physicalDevice, <span class="keywordtype">void</span>* window, <span class="keywordtype">void</span>* display);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacepvr_1_1utils.html#a6bbf98fde377992e9e7e0d23f38a9dcc">getMemoryTypeIndex</a>(<span class="keyword">const</span> pvrvk::PhysicalDevice&amp; physicalDevice, <span class="keyword">const</span> uint32_t allowedMemoryTypeBits, <span class="keyword">const</span> pvrvk::MemoryPropertyFlags requiredMemoryProperties,</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keyword">const</span> pvrvk::MemoryPropertyFlags optimalMemoryProperties, uint32_t&amp; outMemoryTypeIndex, pvrvk::MemoryPropertyFlags&amp; outMemoryPropertyFlags);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div>
<div class="line"><a name="l01333"></a><span class="lineno"><a class="line" href="namespacepvr_1_1utils.html#a59222cc49624a76fab4d4f65e3337ac3"> 1333</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacepvr_1_1utils.html#a59222cc49624a76fab4d4f65e3337ac3">isImageUsageSupportedBySurface</a>(<span class="keyword">const</span> pvrvk::SurfaceCapabilitiesKHR&amp; surfaceCapabilities, pvrvk::ImageUsageFlags imageUsage)</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;{</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">return</span> (static_cast&lt;uint32_t&gt;(surfaceCapabilities.getSupportedUsageFlags() &amp; imageUsage) != 0);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;}</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;} <span class="comment">// namespace utils</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;} <span class="comment">// namespace pvr</span></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_ac9fe2c31e80c1a067508d5d288f12801"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#ac9fe2c31e80c1a067508d5d288f12801">pvr::utils::ImageUpdateInfo::depth</a></div><div class="ttdeci">uint32_t depth</div><div class="ttdoc">Valid for texture updates only. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:304</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vertex_bindings___name_html_af8dc9152ecaae65489a154363a672747"><div class="ttname"><a href="structpvr_1_1utils_1_1_vertex_bindings___name.html#af8dc9152ecaae65489a154363a672747">pvr::utils::VertexBindings_Name::variableName</a></div><div class="ttdeci">StringHash variableName</div><div class="ttdoc">Shader attribute name.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:699</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a6cde0ffe41f15363a6589bf287aa30d3"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a6cde0ffe41f15363a6589bf287aa30d3">pvr::utils::ImageUpdateInfo::arrayIndex</a></div><div class="ttdeci">uint32_t arrayIndex</div><div class="ttdoc">Valid for 1D,2D and Cube texture updates. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:289</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a22821a94e895873a43ffa097381a1415"><div class="ttname"><a href="namespacepvr_1_1utils.html#a22821a94e895873a43ffa097381a1415">pvr::utils::takeScreenshot</a></div><div class="ttdeci">bool takeScreenshot(pvrvk::Swapchain &amp;swapChain, const uint32_t swapIndex, pvrvk::CommandPool &amp;pool, pvrvk::Queue &amp;queue, const std::string &amp;screenshotFileName, vma::Allocator *bufferAllocator=nullptr, vma::Allocator *imageAllocator=nullptr, const uint32_t screenshotScale=1)</div><div class="ttdoc">Saves a particular swapchain image corresponding to the swapchain image at index swapIndex for the sw...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a54f2bb511b50d2c11ddc7377a60714ad"><div class="ttname"><a href="namespacepvr_1_1utils.html#a54f2bb511b50d2c11ddc7377a60714ad">pvr::utils::throwOnErrorDebugReportCallback</a></div><div class="ttdeci">VKAPI_ATTR VkBool32 VKAPI_CALL throwOnErrorDebugReportCallback(VkDebugReportFlagsEXT flags, VkDebugReportObjectTypeEXT objectType, uint64_t object, size_t location, int32_t messageCode, const char *pLayerPrefix, const char *pMessage, void *pUserData)</div><div class="ttdoc">An application DebugReportCallback function providing logging for various events. The callback will a...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a2ea80135aa97006c881f5d3fface1563"><div class="ttname"><a href="namespacepvr_1_1utils.html#a2ea80135aa97006c881f5d3fface1563">pvr::utils::createImage</a></div><div class="ttdeci">pvrvk::Image createImage(pvrvk::Device device, pvrvk::ImageType imageType, pvrvk::Format format, const pvrvk::Extent3D &amp;dimension, pvrvk::ImageUsageFlags usage, pvrvk::ImageCreateFlags flags=pvrvk::ImageCreateFlags(0), const pvrvk::ImageLayersSize &amp;layerSize=pvrvk::ImageLayersSize(), pvrvk::SampleCountFlags samples=pvrvk::SampleCountFlags::e_1_BIT, pvrvk::MemoryPropertyFlags requiredMemoryFlags=pvrvk::MemoryPropertyFlags::e_DEVICE_LOCAL_BIT, pvrvk::MemoryPropertyFlags optimalMemoryFlags=pvrvk::MemoryPropertyFlags::e_NONE, vma::Allocator *imageAllocator=nullptr, vma::AllocationCreateFlags vmaAllocationCreateFlags=vma::AllocationCreateFlags::e_NONE, pvrvk::SharingMode sharingMode=pvrvk::SharingMode::e_EXCLUSIVE, pvrvk::ImageTiling tiling=pvrvk::ImageTiling::e_OPTIMAL, pvrvk::ImageLayout initialLayout=pvrvk::ImageLayout::e_UNDEFINED, const uint32_t *queueFamilyIndices=nullptr, uint32_t numQueueFamilyIndices=0)</div><div class="ttdoc">create a new Image(sparse or with memory backing, depending on flags . The user should not call bindM...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a71cc4019e6c6315a8a714f4103bfe503"><div class="ttname"><a href="namespacepvr_1_1utils.html#a71cc4019e6c6315a8a714f4103bfe503">pvr::utils::updateImage</a></div><div class="ttdeci">void updateImage(pvrvk::Device &amp;device, pvrvk::CommandBufferBase transferCommandBuffer, ImageUpdateInfo *updateInfos, uint32_t numUpdateInfos, pvrvk::Format format, pvrvk::ImageLayout layout, bool isCubeMap, pvrvk::Image &amp;image, vma::Allocator *bufferAllocator=nullptr)</div><div class="ttdoc">Utility function to update an image&#39;s data. This function will record the update of the image in the ...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a8b77d306417876f431ed11fffde3a84f"><div class="ttname"><a href="namespacepvr_1_1utils.html#a8b77d306417876f431ed11fffde3a84f">pvr::utils::createSingleBuffersFromModel</a></div><div class="ttdeci">void createSingleBuffersFromModel(pvrvk::Device &amp;device, const assets::Model &amp;model, VboInsertIterator_ vbos, IboInsertIterator_ ibos, pvrvk::CommandBuffer &amp;uploadCmdBuffer, bool &amp;requiresCommandBufferSubmission, vma::Allocator *bufferAllocator=nullptr, vma::AllocationCreateFlags vmaAllocationCreateFlags=vma::AllocationCreateFlags::e_MAPPED_BIT)</div><div class="ttdoc">Auto generates a set of VBOs and a set of IBOs from the vertex data of the meshes of a model and inse...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1108</div></div>
<div class="ttc" id="_convert_to_p_v_r_vk_types_8h_html"><div class="ttname"><a href="_convert_to_p_v_r_vk_types_8h.html">ConvertToPVRVkTypes.h</a></div><div class="ttdoc">Contains conversions of pvr Enumerations to Vulkan types. </div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a35ffe0060a18ba6f85103107860e465a"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a35ffe0060a18ba6f85103107860e465a">pvr::utils::ImageUpdateInfo::dataSize</a></div><div class="ttdeci">uint32_t dataSize</div><div class="ttdoc">Valid for all. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:292</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a63830a23335c0e841e02b4f02f0363f7"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a63830a23335c0e841e02b4f02f0363f7">pvr::utils::ImageUpdateInfo::imageHeight</a></div><div class="ttdeci">uint32_t imageHeight</div><div class="ttdoc">Valid for 2D, 3D and Cube texture updates. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:296</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_queue_populate_info_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_queue_populate_info.html">pvr::utils::QueuePopulateInfo</a></div><div class="ttdoc">A structure encapsulating the set of queue flags required for a particular queue retrieved via the he...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:418</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a6bbf98fde377992e9e7e0d23f38a9dcc"><div class="ttname"><a href="namespacepvr_1_1utils.html#a6bbf98fde377992e9e7e0d23f38a9dcc">pvr::utils::getMemoryTypeIndex</a></div><div class="ttdeci">void getMemoryTypeIndex(const pvrvk::PhysicalDevice &amp;physicalDevice, const uint32_t allowedMemoryTypeBits, const pvrvk::MemoryPropertyFlags requiredMemoryProperties, const pvrvk::MemoryPropertyFlags optimalMemoryProperties, uint32_t &amp;outMemoryTypeIndex, pvrvk::MemoryPropertyFlags &amp;outMemoryPropertyFlags)</div><div class="ttdoc">Utility function for retrieving a memory type index for a suitable memory type which supports the mem...</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vulkan_version_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_vulkan_version.html">pvr::utils::VulkanVersion</a></div><div class="ttdoc">The VulkanVersion structure provides an easy mechanism for constructing the Vulkan version for use wh...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1273</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a59dd0ec7054d10491117326027890b2d"><div class="ttname"><a href="namespacepvr_1_1utils.html#a59dd0ec7054d10491117326027890b2d">pvr::utils::uploadImageAndViewSubmit</a></div><div class="ttdeci">pvrvk::ImageView uploadImageAndViewSubmit(pvrvk::Device &amp;device, const Texture &amp;texture, bool allowDecompress, pvrvk::CommandPool &amp;cmdPool, pvrvk::Queue &amp;queue, pvrvk::ImageUsageFlags usageFlags=pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout=pvrvk::ImageLayout::e_GENERAL, vma::Allocator *stagingBufferAllocator=nullptr, vma::Allocator *imageAllocator=nullptr, vma::AllocationCreateFlags imageAllocationCreateFlags=vma::AllocationCreateFlags::e_NONE)</div><div class="ttdoc">Uploads an image to GPU memory and returns the created image view and associated image.</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vertex_bindings_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_vertex_bindings.html">pvr::utils::VertexBindings</a></div><div class="ttdoc">Represents a shader Explicit binding, tying a Semantic name to an Attribute Index.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:683</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a42affc049a44dc37070da0d0a88d1ee5"><div class="ttname"><a href="namespacepvr_1_1utils.html#a42affc049a44dc37070da0d0a88d1ee5">pvr::utils::createDeviceAndQueues</a></div><div class="ttdeci">pvrvk::Device createDeviceAndQueues(pvrvk::PhysicalDevice physicalDevice, const QueuePopulateInfo *queueCreateFlags, uint32_t numQueueCreateFlags, QueueAccessInfo *outAccessInfo, const DeviceExtensions &amp;deviceExtensions=DeviceExtensions())</div><div class="ttdoc">Create the pvrvk::Device and the queues</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vertex_bindings_html_a74f6b69852fdb3031ef27bdffa5e2c99"><div class="ttname"><a href="structpvr_1_1utils_1_1_vertex_bindings.html#a74f6b69852fdb3031ef27bdffa5e2c99">pvr::utils::VertexBindings::semanticName</a></div><div class="ttdeci">std::string semanticName</div><div class="ttdoc">Effect semantic.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:686</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a8d9cfeb4d88791e650d994402d00511c"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a8d9cfeb4d88791e650d994402d00511c">pvr::utils::ImageUpdateInfo::dataWidth</a></div><div class="ttdeci">uint32_t dataWidth</div><div class="ttdoc">Valid for all. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:288</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_device_extensions_html_a958e2eeac8ddfd9ea8dabaaa8d2f35cf"><div class="ttname"><a href="structpvr_1_1utils_1_1_device_extensions.html#a958e2eeac8ddfd9ea8dabaaa8d2f35cf">pvr::utils::DeviceExtensions::extensionStrings</a></div><div class="ttdeci">std::vector&lt; std::string &gt; extensionStrings</div><div class="ttdef"><b>Definition:</b> HelperVk.h:441</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a66c0abcd177d448a4b0a140321fa1427"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a66c0abcd177d448a4b0a140321fa1427">pvr::utils::ImageUpdateInfo::data</a></div><div class="ttdeci">const void * data</div><div class="ttdoc">Valid for all. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:291</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a59222cc49624a76fab4d4f65e3337ac3"><div class="ttname"><a href="namespacepvr_1_1utils.html#a59222cc49624a76fab4d4f65e3337ac3">pvr::utils::isImageUsageSupportedBySurface</a></div><div class="ttdeci">bool isImageUsageSupportedBySurface(const pvrvk::SurfaceCapabilitiesKHR &amp;surfaceCapabilities, pvrvk::ImageUsageFlags imageUsage)</div><div class="ttdoc">Utility function used to determine whether the SurfaceCapabilitiesKHR supportedUsageFlags member cont...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1333</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a5aa9ef93f949ec94122ac1f5d915f8a0"><div class="ttname"><a href="namespacepvr_1_1utils.html#a5aa9ef93f949ec94122ac1f5d915f8a0">pvr::utils::setImageLayoutAndQueueFamilyOwnership</a></div><div class="ttdeci">void setImageLayoutAndQueueFamilyOwnership(pvrvk::CommandBufferBase srccmd, pvrvk::CommandBufferBase dstcmd, uint32_t srcQueueFamily, uint32_t dstQueueFamily, pvrvk::ImageLayout oldLayout, pvrvk::ImageLayout newLayout, pvrvk::Image image, uint32_t baseMipLevel, uint32_t numMipLevels, uint32_t baseArrayLayer, uint32_t numArrayLayers, pvrvk::ImageAspectFlags aspect)</div><div class="ttdoc">Set image layout and queue family ownership</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a680ef5943947e565f7d14aa9ff0393d9"><div class="ttname"><a href="namespacepvr_1_1utils.html#a680ef5943947e565f7d14aa9ff0393d9">pvr::utils::createInstance</a></div><div class="ttdeci">pvrvk::Instance createInstance(const std::string &amp;applicationName, VulkanVersion apiVersion=VulkanVersion(), const InstanceExtensions &amp;instanceExtensions=InstanceExtensions(), const InstanceLayers &amp;instanceLayers=InstanceLayers())</div><div class="ttdoc">Utility function for creating a Vulkan instance and supported physical devices using the appropriatel...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_ae8540d26fd007bdb7043485ae4d5d3f7"><div class="ttname"><a href="namespacepvr_1_1utils.html#ae8540d26fd007bdb7043485ae4d5d3f7">pvr::utils::loadAndUploadImageAndView</a></div><div class="ttdeci">pvrvk::ImageView loadAndUploadImageAndView(pvrvk::Device &amp;device, const char *fileName, bool allowDecompress, pvrvk::CommandBuffer &amp;commandBuffer, IAssetProvider &amp;assetProvider, pvrvk::ImageUsageFlags usageFlags=pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout=pvrvk::ImageLayout::e_GENERAL, Texture *outAssetTexture=nullptr, vma::Allocator *stagingBufferAllocator=nullptr, vma::Allocator *imageAllocator=nullptr, vma::AllocationCreateFlags imageAllocationCreateFlags=vma::AllocationCreateFlags::e_NONE)</div><div class="ttdoc">Load and upload image to gpu. The upload command and staging buffers are recorded in the commandbuffe...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a31577c3e0b7564dde7e0e46c252317d3"><div class="ttname"><a href="namespacepvr_1_1utils.html#a31577c3e0b7564dde7e0e46c252317d3">pvr::utils::createSwapchain</a></div><div class="ttdeci">pvrvk::Swapchain createSwapchain(pvrvk::Device &amp;device, const pvrvk::Surface &amp;surface, pvr::DisplayAttributes &amp;displayAttributes, pvrvk::Format *preferredColorFormats, uint32_t numColorFormats, pvrvk::ImageUsageFlags swapchainImageUsageFlags=pvrvk::ImageUsageFlags::e_COLOR_ATTACHMENT_BIT)</div><div class="ttdoc">Create a pvrvk::Swapchain using a pre-initialised pvrvk::Device and pvrvk::Surface choosing the color...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_ad0c9ce4267ec635305fc87aba0b9d9c2"><div class="ttname"><a href="namespacepvr_1_1utils.html#ad0c9ce4267ec635305fc87aba0b9d9c2">pvr::utils::create3dPlaneMesh</a></div><div class="ttdeci">void create3dPlaneMesh(uint32_t width, uint32_t depth, bool generateTexCoords, bool generateNormalCoords, assets::Mesh &amp;outMesh)</div><div class="ttdoc">Creates a 3d plane mesh based on the width and depth specified. Texture coordinates and normal coordi...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_ac66fa9a9c7f8232c3f5aa3f41106cfea"><div class="ttname"><a href="namespacepvr_1_1utils.html#ac66fa9a9c7f8232c3f5aa3f41106cfea">pvr::utils::appendSingleBuffersFromModel</a></div><div class="ttdeci">void appendSingleBuffersFromModel(pvrvk::Device &amp;device, const assets::Model &amp;model, VboContainer_ &amp;vbos, IboContainer_ &amp;ibos, pvrvk::CommandBuffer &amp;uploadCmdBuffer, bool &amp;requiresCommandBufferSubmission, vma::Allocator *bufferAllocator=nullptr, vma::AllocationCreateFlags vmaAllocationCreateFlags=vma::AllocationCreateFlags::e_MAPPED_BIT)</div><div class="ttdoc">Auto generates a set of VBOs and a set of IBOs from the vertex data of the meshes of a model and appe...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1133</div></div>
<div class="ttc" id="namespacepvr_1_1ui_html_a0ce5fbb4f414c19b064979401b3c60bf"><div class="ttname"><a href="namespacepvr_1_1ui.html#a0ce5fbb4f414c19b064979401b3c60bf">pvr::ui::Image</a></div><div class="ttdeci">RefCountedResource&lt; impl::Image_ &gt; Image</div><div class="ttdoc">A Reference Counted Framework Object wrapping the Image_ class. The Image is a Sprite and contains a ...</div><div class="ttdef"><b>Definition:</b> SpriteGles.h:85</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vertex_bindings___name_html_a20e78764d5aab84abdc052ea3e43a965"><div class="ttname"><a href="structpvr_1_1utils_1_1_vertex_bindings___name.html#a20e78764d5aab84abdc052ea3e43a965">pvr::utils::VertexBindings_Name::semantic</a></div><div class="ttdeci">StringHash semantic</div><div class="ttdoc">Effect semantic.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:696</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a021b5205f52c9a4d0cdd26ce9e1f03a7"><div class="ttname"><a href="namespacepvr_1_1utils.html#a021b5205f52c9a4d0cdd26ce9e1f03a7">pvr::utils::createOnscreenFramebufferAndRenderpass</a></div><div class="ttdeci">void createOnscreenFramebufferAndRenderpass(pvrvk::Swapchain &amp;swapchain, pvrvk::ImageView *depthStencilImages, Multi&lt; pvrvk::Framebuffer &gt; &amp;outFramebuffers, pvrvk::RenderPass &amp;outRenderPass, pvrvk::ImageLayout initialSwapchainLayout=pvrvk::ImageLayout::e_UNDEFINED, pvrvk::ImageLayout initialDepthStencilLayout=pvrvk::ImageLayout::e_UNDEFINED)</div><div class="ttdoc">Create a pvrvk::Framebuffer and Renderpass to use for &#39;default&#39; rendering to the &#39;onscreen&#39; color ima...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:599</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vertex_bindings___name_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_vertex_bindings___name.html">pvr::utils::VertexBindings_Name</a></div><div class="ttdoc">Represents a shader Reflective binding, tying a Semantic name to an Attribute variable name...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:693</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_device_extensions_html_ab080c06dadfec28a35acd108a24a87c6"><div class="ttname"><a href="structpvr_1_1utils_1_1_device_extensions.html#ab080c06dadfec28a35acd108a24a87c6">pvr::utils::DeviceExtensions::DeviceExtensions</a></div><div class="ttdeci">DeviceExtensions()</div><div class="ttdoc">Default constructor. Initialises a list of device extensions to be used by default when using the Fra...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:443</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a74171c9f0e1ea8f1eac9a991349389a6"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a74171c9f0e1ea8f1eac9a991349389a6">pvr::utils::ImageUpdateInfo::cubeFace</a></div><div class="ttdeci">uint32_t cubeFace</div><div class="ttdoc">Valid for Cube texture updates only. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:300</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a5d3d1522b9db9f69b91090f918ccc8c0"><div class="ttname"><a href="namespacepvr_1_1utils.html#a5d3d1522b9db9f69b91090f918ccc8c0">pvr::utils::generateTextureAtlas</a></div><div class="ttdeci">void generateTextureAtlas(pvrvk::Device &amp;device, const pvrvk::Image *inputImages, pvrvk::Rect2Df *outUVs, uint32_t numImages, pvrvk::ImageLayout inputImageLayout, pvrvk::ImageView *outImageView, TextureHeader *outDescriptor, pvrvk::CommandBufferBase cmdBuffer, pvrvk::ImageLayout finalLayout=pvrvk::ImageLayout::e_SHADER_READ_ONLY_OPTIMAL, vma::Allocator *imageAllocator=nullptr, vma::AllocationCreateFlags imageAllocationCreateFlags=vma::AllocationCreateFlags::e_NONE)</div><div class="ttdoc">Utility function for generating a texture atlas based on a set of images.</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a40ca7bc0dc1b494e3b13e654bf582012"><div class="ttname"><a href="namespacepvr_1_1utils.html#a40ca7bc0dc1b494e3b13e654bf582012">pvr::utils::populateInputAssemblyFromMesh</a></div><div class="ttdeci">void populateInputAssemblyFromMesh(const assets::Mesh &amp;mesh, const VertexBindings *bindingMap, uint16_t numBindings, pvrvk::PipelineVertexInputStateCreateInfo &amp;vertexCreateInfo, pvrvk::InputAssemblerStateCreateInfo &amp;inputAssemblerCreateInfo, uint16_t *numOutBuffers=nullptr)</div><div class="ttdoc">Fills out input assembly and vertex input state structures using a mesh and a list of corresponding V...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:710</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_queue_access_info_html_a6d0e303c656d8312932d268db869596a"><div class="ttname"><a href="structpvr_1_1utils_1_1_queue_access_info.html#a6d0e303c656d8312932d268db869596a">pvr::utils::QueueAccessInfo::familyId</a></div><div class="ttdeci">uint32_t familyId</div><div class="ttdoc">The queue family identifier the queue with queueId was retrieved from.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:432</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_queue_access_info_html_ae5df4d78d8d64b5009b8c5a9e36c0e23"><div class="ttname"><a href="structpvr_1_1utils_1_1_queue_access_info.html#ae5df4d78d8d64b5009b8c5a9e36c0e23">pvr::utils::QueueAccessInfo::queueId</a></div><div class="ttdeci">uint32_t queueId</div><div class="ttdoc">The queue identifier for the retrieved queue in queue family with identifier familyId.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:435</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a06f94be9a865755c8bafaac56f286b01"><div class="ttname"><a href="namespacepvr_1_1utils.html#a06f94be9a865755c8bafaac56f286b01">pvr::utils::createSingleBuffersFromMeshes</a></div><div class="ttdeci">void createSingleBuffersFromMeshes(pvrvk::Device &amp;device, MeshIterator_ meshIter, MeshIterator_ meshIterEnd, VboInsertIterator_ outVbos, IboInsertIterator_ outIbos, pvrvk::CommandBuffer &amp;uploadCmdBuffer, bool &amp;requiresCommandBufferSubmission, vma::Allocator *bufferAllocator=nullptr, vma::AllocationCreateFlags vmaAllocationCreateFlags=vma::AllocationCreateFlags::e_MAPPED_BIT)</div><div class="ttdoc">Auto generates a set of VBOs and a set of IBOs from the vertex data of multiple meshes and uses std::...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:971</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vulkan_version_html_a6c8a350c06cf3c659a092f0688f860b2"><div class="ttname"><a href="structpvr_1_1utils_1_1_vulkan_version.html#a6c8a350c06cf3c659a092f0688f860b2">pvr::utils::VulkanVersion::minorV</a></div><div class="ttdeci">uint32_t minorV</div><div class="ttdoc">The minor version number.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1278</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a98e4ac9990af6eaf6b9bf0928f2bd07d"><div class="ttname"><a href="namespacepvr_1_1utils.html#a98e4ac9990af6eaf6b9bf0928f2bd07d">pvr::utils::populateClearValues</a></div><div class="ttdeci">void populateClearValues(const pvrvk::RenderPass &amp;renderpass, const pvrvk::ClearValue &amp;clearColor, const pvrvk::ClearValue &amp;clearDepthStencilValue, pvrvk::ClearValue *outClearValues)</div><div class="ttdoc">Populate color and depthstencil clear values</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1192</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a7088e032f08263a7d72acafbd6c93fca"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a7088e032f08263a7d72acafbd6c93fca">pvr::utils::ImageUpdateInfo::dataHeight</a></div><div class="ttdeci">uint32_t dataHeight</div><div class="ttdoc">Valid for 2D, 3D and Cube texture updates. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:297</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_instance_extensions_html_a494d9b581ffb708349599aabc2a5838a"><div class="ttname"><a href="structpvr_1_1utils_1_1_instance_extensions.html#a494d9b581ffb708349599aabc2a5838a">pvr::utils::InstanceExtensions::extensionStrings</a></div><div class="ttdeci">std::vector&lt; std::string &gt; extensionStrings</div><div class="ttdoc">A list of instance extensions. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:497</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a8ea166ded6ff46a11573815a99f42869"><div class="ttname"><a href="namespacepvr_1_1utils.html#a8ea166ded6ff46a11573815a99f42869">pvr::utils::setImageLayout</a></div><div class="ttdeci">void setImageLayout(pvrvk::Image image, pvrvk::ImageLayout oldLayout, pvrvk::ImageLayout newLayout, pvrvk::CommandBufferBase transitionCmdBuffer)</div><div class="ttdoc">Set image layout</div><div class="ttdef"><b>Definition:</b> HelperVk.h:135</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a0688d6e1f181259f4000994896d5157b"><div class="ttname"><a href="namespacepvr_1_1utils.html#a0688d6e1f181259f4000994896d5157b">pvr::utils::populateViewportStateCreateInfo</a></div><div class="ttdeci">void populateViewportStateCreateInfo(const pvrvk::Framebuffer &amp;framebuffer, pvrvk::ViewportStateCreateInfo &amp;outCreateInfo)</div><div class="ttdoc">Fills out a pvrvk::ViewportStateCreateInfo structure setting parameters for a &#39;default&#39; viewport and ...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:675</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_acecac80786da19a6303dbf72345c16a9"><div class="ttname"><a href="namespacepvr_1_1utils.html#acecac80786da19a6303dbf72345c16a9">pvr::utils::createBuffer</a></div><div class="ttdeci">pvrvk::Buffer createBuffer(pvrvk::Device device, VkDeviceSize size, pvrvk::BufferUsageFlags bufferUsage, pvrvk::MemoryPropertyFlags requiredMemoryFlags, pvrvk::MemoryPropertyFlags optimalMemoryFlags=pvrvk::MemoryPropertyFlags::e_NONE, vma::Allocator *bufferAllocator=nullptr, vma::AllocationCreateFlags vmaAllocationCreateFlags=vma::AllocationCreateFlags::e_MAPPED_BIT, pvrvk::BufferCreateFlags bufferCreateFlags=pvrvk::BufferCreateFlags(0), pvrvk::SharingMode sharingMode=pvrvk::SharingMode::e_EXCLUSIVE, const uint32_t *queueFamilyIndices=nullptr, uint32_t numQueueFamilyIndices=0)</div><div class="ttdoc">Create a new buffer object and (optionally) allocate and bind memory for it</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vulkan_version_html_a3e1b806e01b77ae8589182a3d55cb00d"><div class="ttname"><a href="structpvr_1_1utils_1_1_vulkan_version.html#a3e1b806e01b77ae8589182a3d55cb00d">pvr::utils::VulkanVersion::patchV</a></div><div class="ttdeci">uint32_t patchV</div><div class="ttdoc">The patch version number.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1280</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_ae8eb6603e41f6af5b9ddfbe6d6485570"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#ae8eb6603e41f6af5b9ddfbe6d6485570">pvr::utils::ImageUpdateInfo::imageWidth</a></div><div class="ttdeci">uint32_t imageWidth</div><div class="ttdoc">Valid for all. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:287</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vulkan_version_html_a93aa7e756fb29313e3556bb4f5c10f3a"><div class="ttname"><a href="structpvr_1_1utils_1_1_vulkan_version.html#a93aa7e756fb29313e3556bb4f5c10f3a">pvr::utils::VulkanVersion::VulkanVersion</a></div><div class="ttdeci">VulkanVersion(uint32_t majorV=1, uint32_t minorV=1, uint32_t patchV=0)</div><div class="ttdoc">Default constructor for the VulkanVersion structure initiailising the version to the first Vulkan rel...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1286</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_instance_layers_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_instance_layers.html">pvr::utils::InstanceLayers</a></div><div class="ttdoc">Container for a list of instance layers to be used for initiailising an instance using the helper fun...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:470</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a04b412166c06b4293b7eaa1bf6857f50"><div class="ttname"><a href="namespacepvr_1_1utils.html#a04b412166c06b4293b7eaa1bf6857f50">pvr::utils::createDebugReportCallback</a></div><div class="ttdeci">pvrvk::DebugReportCallback createDebugReportCallback(pvrvk::Instance &amp;instance, pvrvk::DebugReportFlagsEXT flags=pvrvk::DebugReportFlagsEXT::e_ERROR_BIT_EXT|pvrvk::DebugReportFlagsEXT::e_PERFORMANCE_WARNING_BIT_EXT|pvrvk::DebugReportFlagsEXT::e_WARNING_BIT_EXT, PFN_vkDebugReportCallbackEXT callback=pvr::utils::logMessageDebugReportCallback, void *userData=nullptr)</div><div class="ttdoc">Create a DebugReportCallback providing an application callback for events of interest to the applicat...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a21012ef6146e3eb4d55ac09d0be368fd"><div class="ttname"><a href="namespacepvr_1_1utils.html#a21012ef6146e3eb4d55ac09d0be368fd">pvr::utils::createSwapchainAndDepthStencilImageAndViews</a></div><div class="ttdeci">void createSwapchainAndDepthStencilImageAndViews(pvrvk::Device &amp;device, const pvrvk::Surface &amp;surface, pvr::DisplayAttributes &amp;displayAttributes, pvrvk::Swapchain &amp;outSwapchain, Multi&lt; pvrvk::ImageView &gt; &amp;outDepthStencil, pvrvk::Format *preferredColorFormats, uint32_t numColorFormats, pvrvk::Format *preferredDepthStencilFormats, uint32_t numDepthStencilFormats, const pvrvk::ImageUsageFlags &amp;swapchainImageUsageFlags=pvrvk::ImageUsageFlags::e_COLOR_ATTACHMENT_BIT, const pvrvk::ImageUsageFlags &amp;dsImageUsageFlags=pvrvk::ImageUsageFlags::e_DEPTH_STENCIL_ATTACHMENT_BIT|pvrvk::ImageUsageFlags::e_TRANSIENT_ATTACHMENT_BIT, vma::Allocator *dsImageAllocator=nullptr, vma::AllocationCreateFlags dsImageAllocationCreateFlags=vma::AllocationCreateFlags::e_DEDICATED_MEMORY_BIT)</div><div class="ttdoc">Create a pvrvk::Swapchain and corresponding number of depth stencil images using a pre-initialised pv...</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_instance_layers_html_a847198ad122769b11e33da68c05725cd"><div class="ttname"><a href="structpvr_1_1utils_1_1_instance_layers.html#a847198ad122769b11e33da68c05725cd">pvr::utils::InstanceLayers::InstanceLayers</a></div><div class="ttdeci">InstanceLayers(bool forceLayers=false)</div><div class="ttdoc">Default constructor. Initialises the list of instance layers based on whether the build is Debug/Rele...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:478</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_device_extensions_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_device_extensions.html">pvr::utils::DeviceExtensions</a></div><div class="ttdoc">Container for a list of device extensions to be used for initiailising a device using the helper func...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:439</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vulkan_version_html_ae034e617f8481394b0d37b6ddaa228fd"><div class="ttname"><a href="structpvr_1_1utils_1_1_vulkan_version.html#ae034e617f8481394b0d37b6ddaa228fd">pvr::utils::VulkanVersion::majorV</a></div><div class="ttdeci">uint32_t majorV</div><div class="ttdoc">The major version number.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1276</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a3555f264beaaf83ff1b84853a87a40fe"><div class="ttname"><a href="namespacepvr_1_1utils.html#a3555f264beaaf83ff1b84853a87a40fe">pvr::utils::getPerspectiveMatrix</a></div><div class="ttdeci">glm::mat4 getPerspectiveMatrix(float fovy, float aspect, float near1, float far1, float rotate=.0f)</div><div class="ttdoc">Create perspective matrix that trasform scenes that use Opengl Convention (+y up) to Vulkan Conventio...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:106</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_abca543a0c306d801f96b0cc6af848371"><div class="ttname"><a href="namespacepvr_1_1utils.html#abca543a0c306d801f96b0cc6af848371">pvr::utils::saveImage</a></div><div class="ttdeci">void saveImage(pvrvk::Image image, const pvrvk::ImageLayout imageInitialLayout, const pvrvk::ImageLayout imageFinalLayout, pvrvk::CommandPool &amp;pool, pvrvk::Queue &amp;queue, const std::string &amp;filename, vma::Allocator *bufferAllocator=nullptr, vma::Allocator *imageAllocator=nullptr, const uint32_t screenshotScale=1)</div><div class="ttdoc">Saves the input image as a TGA file with the filename specified. Note that the image must have been c...</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_instance_extensions_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_instance_extensions.html">pvr::utils::InstanceExtensions</a></div><div class="ttdoc">Container for a list of instance extensions to be used for initiailising an instance using the helper...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:495</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_instance_layers_html_a80f41cec0f1759be144113066bdcd68c"><div class="ttname"><a href="structpvr_1_1utils_1_1_instance_layers.html#a80f41cec0f1759be144113066bdcd68c">pvr::utils::InstanceLayers::layersStrings</a></div><div class="ttdeci">std::vector&lt; std::string &gt; layersStrings</div><div class="ttdoc">A list of instance layers.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:473</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_instance_extensions_html_a3578abfc0e4e90921df30baa73dd2194"><div class="ttname"><a href="structpvr_1_1utils_1_1_instance_extensions.html#a3578abfc0e4e90921df30baa73dd2194">pvr::utils::InstanceExtensions::InstanceExtensions</a></div><div class="ttdeci">InstanceExtensions()</div><div class="ttdoc">Default constructor. Initialises a list of instance extensions to be used by default when using the F...</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_ac885b6f537cb86c114be6696c3dc2fb6"><div class="ttname"><a href="namespacepvr_1_1utils.html#ac885b6f537cb86c114be6696c3dc2fb6">pvr::utils::updateBufferUsingStagingBuffer</a></div><div class="ttdeci">void updateBufferUsingStagingBuffer(pvrvk::Device &amp;device, pvrvk::Buffer &amp;buffer, pvrvk::CommandBufferBase uploadCmdBuffer, const void *data, VkDeviceSize offset=0, VkDeviceSize size=VK_WHOLE_SIZE, vma::Allocator *stagingBufferAllocator=nullptr)</div><div class="ttdoc">Utility function to update a buffer&#39;s data via an indirect copy from a temporary staging buffer...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:377</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a23e2bd58f63311d085500c45a565368e"><div class="ttname"><a href="namespacepvr_1_1utils.html#a23e2bd58f63311d085500c45a565368e">pvr::utils::uploadImageAndView</a></div><div class="ttdeci">pvrvk::ImageView uploadImageAndView(pvrvk::Device &amp;device, const Texture &amp;texture, bool allowDecompress, pvrvk::SecondaryCommandBuffer &amp;commandBuffer, pvrvk::ImageUsageFlags usageFlags=pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout=pvrvk::ImageLayout::e_GENERAL, vma::Allocator *stagingBufferAllocator=nullptr, vma::Allocator *imageAllocator=nullptr, vma::AllocationCreateFlags imageAllocationCreateFlags=vma::AllocationCreateFlags::e_NONE)</div><div class="ttdoc">Uploads an image to gpu. The upload command and staging buffers are recorded in the commandbuffer...</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vertex_bindings_html_ab06b267b0543d9b3f4dff021027f1609"><div class="ttname"><a href="structpvr_1_1utils_1_1_vertex_bindings.html#ab06b267b0543d9b3f4dff021027f1609">pvr::utils::VertexBindings::binding</a></div><div class="ttdeci">int16_t binding</div><div class="ttdoc">Binding id.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:689</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_aa583027696be258fc78dd3156ffaece5"><div class="ttname"><a href="namespacepvr_1_1utils.html#aa583027696be258fc78dd3156ffaece5">pvr::utils::createSurface</a></div><div class="ttdeci">pvrvk::Surface createSurface(pvrvk::Instance &amp;instance, pvrvk::PhysicalDevice &amp;physicalDevice, void *window, void *display)</div><div class="ttdoc">Creates an abstract vulkan native platform surface.</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a1cbbbd1665449ea70d772de63595c806"><div class="ttname"><a href="namespacepvr_1_1utils.html#a1cbbbd1665449ea70d772de63595c806">pvr::utils::logMessageDebugReportCallback</a></div><div class="ttdeci">VKAPI_ATTR VkBool32 VKAPI_CALL logMessageDebugReportCallback(VkDebugReportFlagsEXT flags, VkDebugReportObjectTypeEXT objectType, uint64_t object, size_t location, int32_t messageCode, const char *pLayerPrefix, const char *pMessage, void *pUserData)</div><div class="ttdoc">An application DebugReportCallback function providing logging for various events.</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a618e4160bd8c24d9e0d394dc9511f4a3"><div class="ttname"><a href="namespacepvr_1_1utils.html#a618e4160bd8c24d9e0d394dc9511f4a3">pvr::utils::updateHostVisibleBuffer</a></div><div class="ttdeci">void updateHostVisibleBuffer(pvrvk::Buffer &amp;buffer, const void *data, VkDeviceSize offset=0, VkDeviceSize size=VK_WHOLE_SIZE, bool flushMemory=false)</div><div class="ttdoc">Utility function to update a buffer&#39;s data. This function maps and unmap the buffer only if the buffe...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:337</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a3bae3542769781673b17522db91c19b0"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a3bae3542769781673b17522db91c19b0">pvr::utils::ImageUpdateInfo::offsetY</a></div><div class="ttdeci">int32_t offsetY</div><div class="ttdoc">Valid for 2D, 3D and Cube texture updates. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:295</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_adca914d6eedd686a81a4f0e4cbbc3390"><div class="ttname"><a href="namespacepvr_1_1utils.html#adca914d6eedd686a81a4f0e4cbbc3390">pvr::utils::mapValidationTypeToLogLevel</a></div><div class="ttdeci">LogLevel mapValidationTypeToLogLevel(pvrvk::DebugReportFlagsEXT flags)</div><div class="ttdoc">Maps a set of VkDebugReportFlagsEXT to a particular type of log message.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1212</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a1b452f639a4e507f7d3bdfaf529da029"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a1b452f639a4e507f7d3bdfaf529da029">pvr::utils::ImageUpdateInfo::mipLevel</a></div><div class="ttdeci">uint32_t mipLevel</div><div class="ttdoc">Valid for all. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:290</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_queue_populate_info_html_ab303d9a7f5c55fcd9a13f272ae23b764"><div class="ttname"><a href="structpvr_1_1utils_1_1_queue_populate_info.html#ab303d9a7f5c55fcd9a13f272ae23b764">pvr::utils::QueuePopulateInfo::surface</a></div><div class="ttdeci">pvrvk::Surface surface</div><div class="ttdoc">Indicates that the retrieved queue must support presentation to the provided surface.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:424</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_af9bdb2f2512ec72d5669ae3b870d7fa5"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#af9bdb2f2512ec72d5669ae3b870d7fa5">pvr::utils::ImageUpdateInfo::offsetZ</a></div><div class="ttdeci">int32_t offsetZ</div><div class="ttdoc">Valid for 3D texture updates only. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:303</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_ae6934715b675cba2e0a7454813b431a3"><div class="ttname"><a href="namespacepvr_1_1utils.html#ae6934715b675cba2e0a7454813b431a3">pvr::utils::createSingleBuffersFromMesh</a></div><div class="ttdeci">void createSingleBuffersFromMesh(pvrvk::Device &amp;device, const assets::Mesh &amp;mesh, pvrvk::Buffer &amp;outVbo, pvrvk::Buffer &amp;outIbo, pvrvk::CommandBuffer &amp;uploadCmdBuffer, bool &amp;requiresCommandBufferSubmission, vma::Allocator *bufferAllocator=nullptr, vma::AllocationCreateFlags vmaAllocationCreateFlags=vma::AllocationCreateFlags::e_MAPPED_BIT)</div><div class="ttdoc">Auto generates a single VBO and a single IBO from all the vertex data of a mesh.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:807</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_vulkan_version_html_a4a7dfa46502a507457263578dd48e572"><div class="ttname"><a href="structpvr_1_1utils_1_1_vulkan_version.html#a4a7dfa46502a507457263578dd48e572">pvr::utils::VulkanVersion::toVulkanVersion</a></div><div class="ttdeci">uint32_t toVulkanVersion()</div><div class="ttdoc">Converts the major, minor and patch versions to a uint32_t which can be directly used when creating a...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1290</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html">pvr::utils::ImageUpdateInfo</a></div><div class="ttdoc">The ImageUpdateInfo struct.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:283</div></div>
<div class="ttc" id="_memory_allocator_8h_html"><div class="ttname"><a href="_memory_allocator_8h.html">MemoryAllocator.h</a></div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a95e0a5be7c444548e52a74c2f40faaa5"><div class="ttname"><a href="namespacepvr_1_1utils.html#a95e0a5be7c444548e52a74c2f40faaa5">pvr::utils::createMultipleBuffersFromMesh</a></div><div class="ttdeci">void createMultipleBuffersFromMesh(pvrvk::Device &amp;device, const assets::Mesh &amp;mesh, std::vector&lt; pvrvk::Buffer &gt; &amp;outVbos, pvrvk::Buffer &amp;outIbo, pvrvk::CommandBuffer &amp;uploadCmdBuffer, bool &amp;requiresCommandBufferSubmission, vma::Allocator *bufferAllocator, vma::AllocationCreateFlags vmaAllocationCreateFlags=vma::AllocationCreateFlags::e_MAPPED_BIT)</div><div class="ttdoc">Auto generates a set of VBOs and a single IBO from all the vertex data of a mesh.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:891</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a7ad37dc22982184696fa727a91a4d463"><div class="ttname"><a href="namespacepvr_1_1utils.html#a7ad37dc22982184696fa727a91a4d463">pvr::utils::loadAndUploadImage</a></div><div class="ttdeci">pvrvk::Image loadAndUploadImage(pvrvk::Device &amp;device, const char *fileName, bool allowDecompress, pvrvk::CommandBuffer &amp;commandBuffer, IAssetProvider &amp;assetProvider, pvrvk::ImageUsageFlags usageFlags=pvrvk::ImageUsageFlags::e_SAMPLED_BIT, pvrvk::ImageLayout finalLayout=pvrvk::ImageLayout::e_GENERAL, Texture *outAssetTexture=nullptr, vma::Allocator *stagingBufferAllocator=nullptr, vma::Allocator *imageAllocator=nullptr, vma::AllocationCreateFlags imageAllocationCreateFlags=vma::AllocationCreateFlags::e_NONE)</div><div class="ttdoc">Load and upload image to gpu. The upload command and staging buffers are recorded in the commandbuffe...</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_queue_populate_info_html_a8f6a04a2c21acef02ed848f4de285643"><div class="ttname"><a href="structpvr_1_1utils_1_1_queue_populate_info.html#a8f6a04a2c21acef02ed848f4de285643">pvr::utils::QueuePopulateInfo::queueFlags</a></div><div class="ttdeci">pvrvk::QueueFlags queueFlags</div><div class="ttdoc">The queue flags the queue must support.</div><div class="ttdef"><b>Definition:</b> HelperVk.h:421</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_queue_access_info_html"><div class="ttname"><a href="structpvr_1_1utils_1_1_queue_access_info.html">pvr::utils::QueueAccessInfo</a></div><div class="ttdoc">A structure encapsulating the family id and queue id of a particular queue retrieved via the helper f...</div><div class="ttdef"><b>Definition:</b> HelperVk.h:429</div></div>
<div class="ttc" id="namespacepvr_1_1utils_html_a7151c7b74ff657fc17ff09c0ab114a07"><div class="ttname"><a href="namespacepvr_1_1utils.html#a7151c7b74ff657fc17ff09c0ab114a07">pvr::utils::isFormatDepthStencil</a></div><div class="ttdeci">bool isFormatDepthStencil(pvrvk::Format format)</div><div class="ttdoc">Return true if the format is a depth stencil format</div><div class="ttdef"><b>Definition:</b> HelperVk.h:1180</div></div>
<div class="ttc" id="structpvr_1_1utils_1_1_image_update_info_html_a9c2480ee85781549db081da54c7cbf7b"><div class="ttname"><a href="structpvr_1_1utils_1_1_image_update_info.html#a9c2480ee85781549db081da54c7cbf7b">pvr::utils::ImageUpdateInfo::offsetX</a></div><div class="ttdeci">int32_t offsetX</div><div class="ttdoc">Valid for all. </div><div class="ttdef"><b>Definition:</b> HelperVk.h:286</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part (NON TREEVIEW ONLY!!) -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="FooterMainContainer">
	<div id="FooterContainer">
		<div class="footerlogo">
			<a href="http://www.imgtec.com" target="_blank"><img src="img-footer-logo-grey.png" width="100%" height="100%" border="none" /></a>
		</div>
		<div class="copyright"><p>&copy; Imagination Technologies Limited<br> All rights reserved</p></div>
	</div>
</div>
</body>
</html>
